{"uid":"ec1ae2983299e988","name":"test_network_cut","fullName":"tests.integration.high_availability.test_self_healing#test_network_cut","historyId":"bb2aa2dc0f3a078ccd9996c1af51d19e","time":{"start":1719538589175,"stop":1719538774266,"duration":185091},"description":"Completely cut and restore network.","descriptionHtml":"<p>Completely cut and restore network.</p>\n","status":"broken","statusMessage":"mysql.connector.errors.DatabaseError: 3100 (HY000): Error on observer while running replication hook 'before_commit'.","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 611, in cmd_query\n    self._cmysql.query(\n_mysql_connector.MySQLInterfaceError: Error on observer while running replication hook 'before_commit'.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_self_healing.py\", line 221, in test_network_cut\n    await insert_data_into_mysql_and_validate_replication(ops_test, database_name, table_name)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 289, in insert_data_into_mysql_and_validate_replication\n    await execute_queries_on_unit(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/helpers.py\", line 233, in execute_queries_on_unit\n    cursor.execute(query)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/cursor_cext.py\", line 330, in execute\n    result = self._cnx.cmd_query(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 619, in cmd_query\n    raise get_mysql_exception(\nmysql.connector.errors.DatabaseError: 3100 (HY000): Error on observer while running replication hook 'before_commit'.","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1719538097300,"stop":1719538097301,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1719538097301,"stop":1719538097301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mysql_charm_series","time":{"start":1719538097301,"stop":1719538097301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1719538097301,"stop":1719538097301,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1719538097301,"stop":1719538097440,"duration":139},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1719538097440,"stop":1719538097440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1719538587139,"stop":1719538589174,"duration":2035},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1719538587139,"stop":1719538587139,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Completely cut and restore network.","status":"broken","statusMessage":"mysql.connector.errors.DatabaseError: 3100 (HY000): Error on observer while running replication hook 'before_commit'.","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 611, in cmd_query\n    self._cmysql.query(\n_mysql_connector.MySQLInterfaceError: Error on observer while running replication hook 'before_commit'.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_self_healing.py\", line 221, in test_network_cut\n    await insert_data_into_mysql_and_validate_replication(ops_test, database_name, table_name)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 289, in insert_data_into_mysql_and_validate_replication\n    await execute_queries_on_unit(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/helpers.py\", line 233, in execute_queries_on_unit\n    cursor.execute(query)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/cursor_cext.py\", line 330, in execute\n    result = self._cnx.cmd_query(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 619, in cmd_query\n    raise get_mysql_exception(\nmysql.connector.errors.DatabaseError: 3100 (HY000): Error on observer while running replication hook 'before_commit'.","steps":[],"attachments":[{"uid":"4e196524041438f3","name":"log","source":"4e196524041438f3.txt","type":"text/plain","size":1551}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1719538774282,"stop":1719538776316,"duration":2034},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1719538776317,"stop":1719538776317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1719538776324,"stop":1719538794298,"duration":17974},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1719538794298,"stop":1719538794298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1719538794298,"stop":1719538794298,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1719538794299,"stop":1719538794299,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1446-417"},{"name":"thread","value":"7301-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ebb0f5216ad0c28e","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":38,"unknown":0,"total":39},"items":[{"uid":"3d60c6bc20cb6ee","reportUrl":"../2667//#testresult/3d60c6bc20cb6ee","status":"passed","time":{"start":1719452171539,"stop":1719452392716,"duration":221177}},{"uid":"f3be3795ed33f151","reportUrl":"../2660//#testresult/f3be3795ed33f151","status":"passed","time":{"start":1719365865404,"stop":1719366098185,"duration":232781}},{"uid":"d84e371ade87e449","reportUrl":"../2653//#testresult/d84e371ade87e449","status":"passed","time":{"start":1719279428461,"stop":1719279625379,"duration":196918}},{"uid":"98ee6121b4f83cb0","reportUrl":"../2652//#testresult/98ee6121b4f83cb0","status":"passed","time":{"start":1719193012774,"stop":1719193241167,"duration":228393}},{"uid":"327cabbb2285bda9","reportUrl":"../2649//#testresult/327cabbb2285bda9","status":"passed","time":{"start":1719106627247,"stop":1719106835226,"duration":207979}},{"uid":"4b5218550b5fcc6f","reportUrl":"../2648//#testresult/4b5218550b5fcc6f","status":"passed","time":{"start":1719020173782,"stop":1719020405400,"duration":231618}},{"uid":"8b678813cde6167a","reportUrl":"../2642//#testresult/8b678813cde6167a","status":"passed","time":{"start":1718933785744,"stop":1718933996820,"duration":211076}},{"uid":"8404c9b38fee15a3","reportUrl":"../2637//#testresult/8404c9b38fee15a3","status":"passed","time":{"start":1718847363422,"stop":1718847592647,"duration":229225}},{"uid":"425a7eb4145543ec","reportUrl":"../2631//#testresult/425a7eb4145543ec","status":"passed","time":{"start":1718760967285,"stop":1718761185590,"duration":218305}},{"uid":"313eab28f0f7a8d0","reportUrl":"../2628//#testresult/313eab28f0f7a8d0","status":"passed","time":{"start":1718674630553,"stop":1718674850091,"duration":219538}},{"uid":"fd0a68b71e40f726","reportUrl":"../2626//#testresult/fd0a68b71e40f726","status":"passed","time":{"start":1718588153113,"stop":1718588365405,"duration":212292}},{"uid":"ce186e7d35ac5192","reportUrl":"../2625//#testresult/ce186e7d35ac5192","status":"passed","time":{"start":1718501818150,"stop":1718502031682,"duration":213532}},{"uid":"d824d63ad96b3b92","reportUrl":"../2624//#testresult/d824d63ad96b3b92","status":"passed","time":{"start":1718415366821,"stop":1718415587503,"duration":220682}},{"uid":"8032cebc2775437","reportUrl":"../2621//#testresult/8032cebc2775437","status":"passed","time":{"start":1718329193465,"stop":1718329404724,"duration":211259}},{"uid":"fdaa55b791d4b9f3","reportUrl":"../2617//#testresult/fdaa55b791d4b9f3","status":"passed","time":{"start":1718243094868,"stop":1718243326855,"duration":231987}},{"uid":"1cce13a103f6d842","reportUrl":"../2615//#testresult/1cce13a103f6d842","status":"passed","time":{"start":1718157591175,"stop":1718157819438,"duration":228263}},{"uid":"64e4013da782071a","reportUrl":"../2609//#testresult/64e4013da782071a","status":"passed","time":{"start":1718070538676,"stop":1718070762072,"duration":223396}},{"uid":"ca586c608544238e","reportUrl":"../2604//#testresult/ca586c608544238e","status":"passed","time":{"start":1717984505895,"stop":1717984719154,"duration":213259}},{"uid":"72110492000d7ad2","reportUrl":"../2603//#testresult/72110492000d7ad2","status":"passed","time":{"start":1717897080036,"stop":1717897302980,"duration":222944}},{"uid":"dabf9865ad4487c3","reportUrl":"../2601//#testresult/dabf9865ad4487c3","status":"passed","time":{"start":1717811721242,"stop":1717811934248,"duration":213006}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"ec1ae2983299e988.json","parameterValues":[]}