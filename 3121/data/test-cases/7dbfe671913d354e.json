{"uid":"7dbfe671913d354e","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_async_replication#test_build_and_deploy","historyId":"397dd6fb76b9bc4c6b9a194769795918","time":{"start":1730251977003,"stop":1730252614863,"duration":637860},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [executing] maintenance: Installing MySQL\n  db1/1 [idle] waiting: Waiting to start MySQL\n  db1/2 [idle] waiting: Waiting to start MySQL","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [executing] maintenance: Installing MySQL\n  db1/1 [idle] waiting: Waiting to start MySQL\n  db1/2 [idle] waiting: Waiting to start MySQL","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1730251976245,"stop":1730251976246,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1730251976246,"stop":1730251976246,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1730251976246,"stop":1730251976387,"duration":141},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1730251976388,"stop":1730251977002,"duration":614},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1730251976388,"stop":1730251976388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1730251977002,"stop":1730251977003,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [executing] maintenance: Installing MySQL\n  db1/1 [idle] waiting: Waiting to start MySQL\n  db1/2 [idle] waiting: Waiting to start MySQL","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [executing] maintenance: Installing MySQL\n  db1/1 [idle] waiting: Waiting to start MySQL\n  db1/2 [idle] waiting: Waiting to start MySQL","steps":[],"attachments":[{"uid":"cb59441281e1f49c","name":"log","source":"cb59441281e1f49c.txt","type":"text/plain","size":8317}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1730252614874,"stop":1730252614874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1730252614892,"stop":1730252614912,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1730252614913,"stop":1730252615925,"duration":1012},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1730252615925,"stop":1730252615926,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1730252615926,"stop":1730252615926,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1730252615926,"stop":1730252615926,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1773-886"},{"name":"thread","value":"15922-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"cac4724eec019ffc","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":20,"skipped":0,"passed":130,"unknown":4,"total":154},"items":[{"uid":"586a1d2a8c36cde","reportUrl":"../3119//#testresult/586a1d2a8c36cde","status":"passed","time":{"start":1730165558647,"stop":1730166162709,"duration":604062}},{"uid":"6ade192f5d0fd8b0","reportUrl":"../3118//#testresult/6ade192f5d0fd8b0","status":"passed","time":{"start":1730079176294,"stop":1730079811951,"duration":635657}},{"uid":"ba5fc1f46212ab6a","reportUrl":"../3116//#testresult/ba5fc1f46212ab6a","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [executing] maintenance: Installing MySQL","time":{"start":1729992793504,"stop":1729993428940,"duration":635436}},{"uid":"7d002210eee2115d","reportUrl":"../3115//#testresult/7d002210eee2115d","status":"passed","time":{"start":1729906408825,"stop":1729906970016,"duration":561191}},{"uid":"1b3db51770e79f1f","reportUrl":"../3113//#testresult/1b3db51770e79f1f","status":"unknown","time":{}},{"uid":"c914112cf577603b","reportUrl":"../3110//#testresult/c914112cf577603b","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Failed to initialize MySQL users\n  db2/1 [idle] active: Primary\n  db2/2 [idle] active:","time":{"start":1729733560552,"stop":1729734196290,"duration":635738}},{"uid":"3728c6f77361c9e0","reportUrl":"../3107//#testresult/3728c6f77361c9e0","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [executing] waiting: Waiting to join the cluster\n  db2/1 [idle] active: \n  db2/2 [idle] active: Primary","time":{"start":1729647100114,"stop":1729647737849,"duration":637735}},{"uid":"380c642a9130a46","reportUrl":"../3105//#testresult/380c642a9130a46","status":"passed","time":{"start":1729560806720,"stop":1729561374414,"duration":567694}},{"uid":"d107a20916642e6f","reportUrl":"../3104//#testresult/d107a20916642e6f","status":"unknown","time":{}},{"uid":"dd5b0bfb59754d82","reportUrl":"../3103//#testresult/dd5b0bfb59754d82","status":"passed","time":{"start":1729387879302,"stop":1729388429622,"duration":550320}},{"uid":"26a4e4410323ef90","reportUrl":"../3102//#testresult/26a4e4410323ef90","status":"passed","time":{"start":1729301524515,"stop":1729302056035,"duration":531520}},{"uid":"a0be431029239337","reportUrl":"../3097//#testresult/a0be431029239337","status":"passed","time":{"start":1729215102503,"stop":1729215637376,"duration":534873}},{"uid":"bdeb120d74f72455","reportUrl":"../3093//#testresult/bdeb120d74f72455","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/2 [executing] maintenance: Installing MySQL","time":{"start":1729128746436,"stop":1729129370461,"duration":624025}},{"uid":"6c5922bb8345a411","reportUrl":"../3090//#testresult/6c5922bb8345a411","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] active: \n  db2/1 [idle] active: Primary\n  db2/2 [executing] maintenance: Installing MySQL","time":{"start":1729042368605,"stop":1729042995553,"duration":626948}},{"uid":"1bb6682953737b4","reportUrl":"../3088//#testresult/1bb6682953737b4","status":"passed","time":{"start":1728956118065,"stop":1728956670922,"duration":552857}},{"uid":"ee29e64e78ce40fa","reportUrl":"../3086//#testresult/ee29e64e78ce40fa","status":"unknown","time":{}},{"uid":"be61195cb566444c","reportUrl":"../3085//#testresult/be61195cb566444c","status":"passed","time":{"start":1728783163600,"stop":1728783707130,"duration":543530}},{"uid":"46b849daee107649","reportUrl":"../3084//#testresult/46b849daee107649","status":"passed","time":{"start":1728696660574,"stop":1728697229430,"duration":568856}},{"uid":"660b1868ecf8fdf9","reportUrl":"../3081//#testresult/660b1868ecf8fdf9","status":"passed","time":{"start":1728610326370,"stop":1728610888975,"duration":562605}},{"uid":"7939901b1bd1c4f2","reportUrl":"../3078//#testresult/7939901b1bd1c4f2","status":"passed","time":{"start":1728523894776,"stop":1728524457468,"duration":562692}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"7dbfe671913d354e.json","parameterValues":[]}