[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:303 Deploying a new mysql cluster
[32mINFO    [0m juju.model:model.py:2284 Deploying local:mysql-1
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [allocating] waiting: agent initialising
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [executing] waiting: Waiting to start MySQL
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [executing] maintenance: Setting up cluster node
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [idle] active: Primary
[33mWARNING [0m juju.model:model.py:1666 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [idle] active: Primary
  s3-integrator/0 [idle] active: 
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:322 Rotating all mysql credentials
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:340 Syncing credentials
[32mINFO    [0m juju.model:model.py:3211 Waiting for model:
  another-mysql/0 [executing] active: Primary
  s3-integrator/0 [idle] active: 
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:354 Waiting for blocked application status with another cluster S3 repository
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:362 Restoring backup_id='2025-12-12T01:42:39Z'
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:367 Ensuring that the pre-backup inserted value exists in database, while post-backup inserted value does not
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:380 Inserting value after restore
[32mINFO    [0m integration.helpers:helpers.py:348 Retrieving primary unit
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:388 Ensuring that pre-backup and post-restore values exist in the database
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:399 Waiting for blocked application status after restore
[32mINFO    [0m pytest_operator.plugin:plugin.py:862 Model status:

Model    Controller     Cloud/Region         Version  SLA          Timestamp
testing  concierge-lxd  localhost/localhost  3.6.12   unsupported  01:58:13Z

App            Version          Status   Scale  Charm          Channel   Rev  Exposed  Message
another-mysql  8.0.42-0ubun...  blocked      1  mysql                      1  no       Move restored cluster to another S3 repository
mysql                           blocked      0  mysql                      0  no       Move restored cluster to another S3 repository
s3-integrator                   active       1  s3-integrator  1/stable  145  no       

Unit              Workload  Agent      Machine  Public address  Ports           Message
another-mysql/0*  active    executing  6        10.244.145.216  3306,33060/tcp  Primary
s3-integrator/0*  active    idle       3        10.244.145.230                  

Machine  State    Address         Inst id        Base          AZ             Message
3        started  10.244.145.230  juju-bad7d2-3  ubuntu@22.04  runnervm6qbrg  Running
6        started  10.244.145.216  juju-bad7d2-6  ubuntu@22.04  runnervm6qbrg  Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:868 Juju error logs:

machine-0: 01:36:16 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:36:16 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-mysql-0: 01:37:33 ERROR unit.mysql/0.juju-log Failed command: fuser 3306/tcp; user=None; group=None
machine-1: 01:37:41 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:37:41 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:37:52 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:37:52 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-mysql-1: 01:38:31 ERROR unit.mysql/1.juju-log Failed command: fuser 3306/tcp; user=None; group=None
unit-mysql-2: 01:38:46 ERROR unit.mysql/2.juju-log Failed command: fuser 3306/tcp; user=None; group=None
machine-3: 01:41:39 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:41:39 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:46:13 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:46:13 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:46:14 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:46:14 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-mysql-3: 01:47:07 ERROR unit.mysql/3.juju-log Failed command: fuser 3306/tcp; user=None; group=None
unit-mysql-4: 01:47:10 ERROR unit.mysql/4.juju-log Failed command: fuser 3306/tcp; user=None; group=None
unit-mysql-4: 01:49:07 ERROR unit.mysql/4.juju-log Failed to execute mysql-shell command
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-mysql-4/charm/src/mysql_vm_helpers.py", line 774, in _run_mysqlsh_script
    output = subprocess.check_output(  # noqa: S603
  File "/usr/lib/python3.10/subprocess.py", line 421, in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
  File "/usr/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['charmed-mysql.mysqlsh', '--passwords-from-stdin', '--uri=serverconfig@juju-bad7d2-5.lxd:33062', '--python', '-c', "shell.options.set('useWizards', False)\nprint('###')\ncluster = dba.get_cluster('test_cluster')\nprint(cluster.status({'extended': False}))"]' returned non-zero exit status 1.
unit-mysql-4: 01:49:07 ERROR unit.mysql/4.juju-log Failed to get cluster status for test_cluster
unit-mysql-3: 01:49:08 ERROR unit.mysql/3.juju-log Failed to execute mysql-shell command
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-mysql-3/charm/src/mysql_vm_helpers.py", line 774, in _run_mysqlsh_script
    output = subprocess.check_output(  # noqa: S603
  File "/usr/lib/python3.10/subprocess.py", line 421, in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
  File "/usr/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['charmed-mysql.mysqlsh', '--passwords-from-stdin', '--uri=serverconfig@juju-bad7d2-4.lxd:33062', '--python', '-c', "shell.options.set('useWizards', False)\nprint('###')\ncluster = dba.get_cluster('test_cluster')\nprint(cluster.status({'extended': False}))"]' returned non-zero exit status 1.
unit-mysql-3: 01:49:08 ERROR unit.mysql/3.juju-log Failed to get cluster status for test_cluster
machine-6: 01:50:49 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 01:50:49 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-another-mysql-0: 01:51:34 ERROR unit.another-mysql/0.juju-log Failed command: fuser 3306/tcp; user=None; group=None

[32mINFO    [0m pytest_operator.plugin:plugin.py:947 Forgetting model main...
[32mINFO    [0m integration.integration.test_backup_aws:test_backup_aws.py:75 Cleaning backups from cloud buckets