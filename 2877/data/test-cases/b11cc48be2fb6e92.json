{"uid":"b11cc48be2fb6e92","name":"test_upgrade_from_stable","fullName":"tests.integration.high_availability.test_upgrade_from_stable#test_upgrade_from_stable","historyId":"fe154b88a315bf4fc4617f727e70d7c2","time":{"start":1723168057053,"stop":1723169291390,"duration":1234337},"description":"Test updating from stable channel.","descriptionHtml":"<p>Test updating from stable channel.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [executing] blocked: \n  mysql/1 [executing] maintenance: upgrade completed\n  mysql/2 [executing] maintenance: upgrade completed","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 99, in test_upgrade_from_stable\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [executing] blocked: \n  mysql/1 [executing] maintenance: upgrade completed\n  mysql/2 [executing] maintenance: upgrade completed","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1723167715855,"stop":1723167715856,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1723167715856,"stop":1723167715856,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1723167715856,"stop":1723167716000,"duration":144},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1723168057053,"stop":1723168057053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test updating from stable channel.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [executing] blocked: \n  mysql/1 [executing] maintenance: upgrade completed\n  mysql/2 [executing] maintenance: upgrade completed","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 99, in test_upgrade_from_stable\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [executing] blocked: \n  mysql/1 [executing] maintenance: upgrade completed\n  mysql/2 [executing] maintenance: upgrade completed","steps":[],"attachments":[{"uid":"9839de273794af8e","name":"log","source":"9839de273794af8e.txt","type":"text/plain","size":15702}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1723169291394,"stop":1723169291394,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1723169291394,"stop":1723169306348,"duration":14954},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1723169306348,"stop":1723169306348,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1723169306348,"stop":1723169306349,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1723169306349,"stop":1723169306349,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_from_stable"},{"name":"host","value":"fv-az2021-942"},{"name":"thread","value":"8509-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_from_stable"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ecb10886b38285e6","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":5,"skipped":0,"passed":69,"unknown":2,"total":76},"items":[{"uid":"b73d4ed329b1187f","reportUrl":"../2859//#testresult/b73d4ed329b1187f","status":"passed","time":{"start":1722909412650,"stop":1722909718716,"duration":306066}},{"uid":"d9a9a690626eac36","reportUrl":"../2850//#testresult/d9a9a690626eac36","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError","time":{"start":1722823090583,"stop":1722824291332,"duration":1200749}},{"uid":"d46cd83fd3dbdb4a","reportUrl":"../2849//#testresult/d46cd83fd3dbdb4a","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError","time":{"start":1722736193692,"stop":1722737394434,"duration":1200742}},{"uid":"2993560483a3faf5","reportUrl":"../2848//#testresult/2993560483a3faf5","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError","time":{"start":1722649613846,"stop":1722650814586,"duration":1200740}},{"uid":"68de067d9c35c1a0","reportUrl":"../2841//#testresult/68de067d9c35c1a0","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError","time":{"start":1722563137861,"stop":1722564338571,"duration":1200710}},{"uid":"d23ab836da9a9f08","reportUrl":"../2839//#testresult/d23ab836da9a9f08","status":"passed","time":{"start":1722476356886,"stop":1722476649165,"duration":292279}},{"uid":"3fb1dc0e4fa902de","reportUrl":"../2836//#testresult/3fb1dc0e4fa902de","status":"passed","time":{"start":1722389758848,"stop":1722390009571,"duration":250723}},{"uid":"59f409838961c64e","reportUrl":"../2832//#testresult/59f409838961c64e","status":"passed","time":{"start":1722303669264,"stop":1722303915948,"duration":246684}},{"uid":"69abfe56a3e688f4","reportUrl":"../2827//#testresult/69abfe56a3e688f4","status":"passed","time":{"start":1722217237579,"stop":1722217511636,"duration":274057}},{"uid":"be8afc38798e658e","reportUrl":"../2824//#testresult/be8afc38798e658e","status":"passed","time":{"start":1722130867560,"stop":1722131110182,"duration":242622}},{"uid":"45274d10f618e637","reportUrl":"../2819//#testresult/45274d10f618e637","status":"passed","time":{"start":1722044235219,"stop":1722044466606,"duration":231387}},{"uid":"637e8eadb62ff9d5","reportUrl":"../2811//#testresult/637e8eadb62ff9d5","status":"passed","time":{"start":1721958246722,"stop":1721958492143,"duration":245421}},{"uid":"e39f3f61730bb26a","reportUrl":"../2807//#testresult/e39f3f61730bb26a","status":"passed","time":{"start":1721871637799,"stop":1721871868846,"duration":231047}},{"uid":"8c4318f2a67e85a4","reportUrl":"../2802//#testresult/8c4318f2a67e85a4","status":"passed","time":{"start":1721785572313,"stop":1721785819244,"duration":246931}},{"uid":"7aa05abd5691dee4","reportUrl":"../2797//#testresult/7aa05abd5691dee4","status":"passed","time":{"start":1721698898820,"stop":1721699147281,"duration":248461}},{"uid":"893c6deea22c4996","reportUrl":"../2787//#testresult/893c6deea22c4996","status":"passed","time":{"start":1721612891814,"stop":1721613177067,"duration":285253}},{"uid":"a9a32a6f36eca04","reportUrl":"../2786//#testresult/a9a32a6f36eca04","status":"unknown","time":{}},{"uid":"be68680d790355ab","reportUrl":"../2785//#testresult/be68680d790355ab","status":"passed","time":{"start":1721439998756,"stop":1721440240390,"duration":241634}},{"uid":"9277782f16d5ffd8","reportUrl":"../2776//#testresult/9277782f16d5ffd8","status":"passed","time":{"start":1721266980679,"stop":1721267241153,"duration":260474}},{"uid":"66ecc6e177ea82ba","reportUrl":"../2773//#testresult/66ecc6e177ea82ba","status":"passed","time":{"start":1721180573878,"stop":1721180828724,"duration":254846}}]},"tags":["asyncio","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"b11cc48be2fb6e92.json","parameterValues":[]}