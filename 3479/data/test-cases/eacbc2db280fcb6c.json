{"uid":"eacbc2db280fcb6c","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_upgrade_rollback_incompat#test_build_and_deploy","historyId":"c7f943e00fe8350916d652927be51e6e","time":{"start":1738718855954,"stop":1738720065101,"duration":1209147},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\nmysql/1 [executing] maintenance: Installing MySQL","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_rollback_incompat.py\", line 68, in test_build_and_deploy\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 213, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\nmysql/1 [executing] maintenance: Installing MySQL","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1738718855832,"stop":1738718855832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1738718855833,"stop":1738718855954,"duration":121},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1738718855833,"stop":1738718855833,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1738718855954,"stop":1738718855954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\nmysql/1 [executing] maintenance: Installing MySQL","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_rollback_incompat.py\", line 68, in test_build_and_deploy\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 213, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\nmysql/1 [executing] maintenance: Installing MySQL","steps":[],"attachments":[{"uid":"b09e64f03a95a810","name":"log","source":"b09e64f03a95a810.txt","type":"text/plain","size":7044}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1738720065178,"stop":1738720065178,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1738720065243,"stop":1738720065727,"duration":484},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1738720065728,"stop":1738720065728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1738720065728,"stop":1738720065728,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1738720065728,"stop":1738720065729,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_rollback_incompat"},{"name":"host","value":"fv-az2035-872"},{"name":"thread","value":"11365-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_rollback_incompat"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8869bcc4e0293423","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":6,"skipped":0,"passed":232,"unknown":5,"total":243},"items":[{"uid":"7fc777a349e44a3c","reportUrl":"../3473//#testresult/7fc777a349e44a3c","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\nmysql/2 [executing] maintenance: Installing MySQL","time":{"start":1738632529180,"stop":1738633740654,"duration":1211474}},{"uid":"806461a56691556b","reportUrl":"../3464//#testresult/806461a56691556b","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\nmysql/0 [executing] maintenance: Installing MySQL\n  mysql/1 [idle] waiting: Waiting to start MySQL\n  mysql/2 [idle] waiting: Waiting to start MySQL\n  mysql-test-app/0 [idle] waiting:","time":{"start":1738546157935,"stop":1738547367765,"duration":1209830}},{"uid":"a53fb3d66ae9a729","reportUrl":"../3463//#testresult/a53fb3d66ae9a729","status":"passed","time":{"start":1738459709917,"stop":1738460198552,"duration":488635}},{"uid":"683ee96b7983a252","reportUrl":"../3462//#testresult/683ee96b7983a252","status":"passed","time":{"start":1738373278893,"stop":1738373921480,"duration":642587}},{"uid":"2f828fd53507f2fc","reportUrl":"../3455//#testresult/2f828fd53507f2fc","status":"passed","time":{"start":1738286904380,"stop":1738287506002,"duration":601622}},{"uid":"ee35e6715aa63c5d","reportUrl":"../3448//#testresult/ee35e6715aa63c5d","status":"passed","time":{"start":1738200497195,"stop":1738201072101,"duration":574906}},{"uid":"c4583eb2fe067a4e","reportUrl":"../3441//#testresult/c4583eb2fe067a4e","status":"passed","time":{"start":1738114079025,"stop":1738114675655,"duration":596630}},{"uid":"f55de3d32f08d231","reportUrl":"../3436//#testresult/f55de3d32f08d231","status":"passed","time":{"start":1738027649764,"stop":1738028146072,"duration":496308}},{"uid":"7bb3336e62e8e3de","reportUrl":"../3433//#testresult/7bb3336e62e8e3de","status":"passed","time":{"start":1737941279063,"stop":1737941807855,"duration":528792}},{"uid":"12bc54447b27c58e","reportUrl":"../3431//#testresult/12bc54447b27c58e","status":"passed","time":{"start":1737854905360,"stop":1737855390333,"duration":484973}},{"uid":"331a5d472bae6ffc","reportUrl":"../3429//#testresult/331a5d472bae6ffc","status":"passed","time":{"start":1737768470318,"stop":1737769050428,"duration":580110}},{"uid":"61ae4fecd496e782","reportUrl":"../3418//#testresult/61ae4fecd496e782","status":"passed","time":{"start":1737682114261,"stop":1737682710023,"duration":595762}},{"uid":"62d49832430c7234","reportUrl":"../3412//#testresult/62d49832430c7234","status":"passed","time":{"start":1737595657554,"stop":1737596183671,"duration":526117}},{"uid":"dc91f4d994cca65f","reportUrl":"../3404//#testresult/dc91f4d994cca65f","status":"passed","time":{"start":1737509301403,"stop":1737509739564,"duration":438161}},{"uid":"be147e2389469450","reportUrl":"../3395//#testresult/be147e2389469450","status":"passed","time":{"start":1737422915241,"stop":1737423448589,"duration":533348}},{"uid":"693b964c78b976a5","reportUrl":"../3388//#testresult/693b964c78b976a5","status":"passed","time":{"start":1737336491623,"stop":1737336929000,"duration":437377}},{"uid":"94f0f7e1321bb031","reportUrl":"../3387//#testresult/94f0f7e1321bb031","status":"passed","time":{"start":1737250094366,"stop":1737250781931,"duration":687565}},{"uid":"3b60b397a02194e","reportUrl":"../3386//#testresult/3b60b397a02194e","status":"passed","time":{"start":1737163729587,"stop":1737164197648,"duration":468061}},{"uid":"a79c9da9e7cd0eee","reportUrl":"../3379//#testresult/a79c9da9e7cd0eee","status":"passed","time":{"start":1737077336103,"stop":1737077796832,"duration":460729}},{"uid":"3215ca988e38e8dc","reportUrl":"../3375//#testresult/3215ca988e38e8dc","status":"passed","time":{"start":1736991022950,"stop":1736991509552,"duration":486602}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"eacbc2db280fcb6c.json","parameterValues":[]}