{"uid":"44a977bb406fadec","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_replication#test_build_and_deploy","historyId":"afe418e4ae935fa7b2e00a1102fd39ca","time":{"start":1722822644240,"stop":1722823844667,"duration":1200427},"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","descriptionHtml":"<p>Build the charm and deploy 3 units to ensure a cluster is formed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 53, in test_build_and_deploy\n    await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 226, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 148, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1722822644083,"stop":1722822644084,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1722822644084,"stop":1722822644240,"duration":156},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1722822644084,"stop":1722822644084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1722822644240,"stop":1722822644240,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 53, in test_build_and_deploy\n    await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 226, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 148, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","steps":[],"attachments":[{"uid":"b064f607499abdef","name":"log","source":"b064f607499abdef.txt","type":"text/plain","size":6469}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1722823844712,"stop":1722823844713,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1722823844724,"stop":1722823864458,"duration":19734},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1722823864458,"stop":1722823864458,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1722823864458,"stop":1722823864458,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1722823864458,"stop":1722823864459,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_replication"},{"name":"host","value":"fv-az1242-612"},{"name":"thread","value":"7874-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8c7dbee60174fa33","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":71,"unknown":1,"total":76},"items":[{"uid":"5af31d9b137bd0da","reportUrl":"../2849//#testresult/5af31d9b137bd0da","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","time":{"start":1722736363856,"stop":1722737564100,"duration":1200244}},{"uid":"91932ddeeba2bda0","reportUrl":"../2848//#testresult/91932ddeeba2bda0","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","time":{"start":1722649270370,"stop":1722650470554,"duration":1200184}},{"uid":"2f34c4820fd1cd04","reportUrl":"../2841//#testresult/2f34c4820fd1cd04","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","time":{"start":1722562785252,"stop":1722563985745,"duration":1200493}},{"uid":"706dfa6815bd8675","reportUrl":"../2839//#testresult/706dfa6815bd8675","status":"passed","time":{"start":1722476071859,"stop":1722476394293,"duration":322434}},{"uid":"3b6192e6505f35b1","reportUrl":"../2836//#testresult/3b6192e6505f35b1","status":"passed","time":{"start":1722389437641,"stop":1722389761112,"duration":323471}},{"uid":"5b28494a99ed26e2","reportUrl":"../2832//#testresult/5b28494a99ed26e2","status":"passed","time":{"start":1722303484420,"stop":1722303803020,"duration":318600}},{"uid":"f96923bc40773858","reportUrl":"../2827//#testresult/f96923bc40773858","status":"passed","time":{"start":1722216797877,"stop":1722217108061,"duration":310184}},{"uid":"a3c3ecfb464d7211","reportUrl":"../2824//#testresult/a3c3ecfb464d7211","status":"passed","time":{"start":1722130998658,"stop":1722131335880,"duration":337222}},{"uid":"856b38f9d3ba758d","reportUrl":"../2819//#testresult/856b38f9d3ba758d","status":"passed","time":{"start":1722043903967,"stop":1722044214009,"duration":310042}},{"uid":"faee16ae41aeec49","reportUrl":"../2811//#testresult/faee16ae41aeec49","status":"passed","time":{"start":1721957990422,"stop":1721958335228,"duration":344806}},{"uid":"9416ca0fcff8c9dc","reportUrl":"../2807//#testresult/9416ca0fcff8c9dc","status":"passed","time":{"start":1721871205514,"stop":1721871563625,"duration":358111}},{"uid":"c61b74fded28fde9","reportUrl":"../2802//#testresult/c61b74fded28fde9","status":"unknown","time":{}},{"uid":"cfe3fac7d8be436f","reportUrl":"../2797//#testresult/cfe3fac7d8be436f","status":"passed","time":{"start":1721698516337,"stop":1721698858027,"duration":341690}},{"uid":"db1a6b90bbdf9360","reportUrl":"../2787//#testresult/db1a6b90bbdf9360","status":"passed","time":{"start":1721612151134,"stop":1721612485319,"duration":334185}},{"uid":"91120c5057944e3b","reportUrl":"../2786//#testresult/91120c5057944e3b","status":"passed","time":{"start":1721525661355,"stop":1721525974738,"duration":313383}},{"uid":"7d8501b8436bbadf","reportUrl":"../2785//#testresult/7d8501b8436bbadf","status":"passed","time":{"start":1721439191612,"stop":1721439538709,"duration":347097}},{"uid":"a3b5d588e8ab9178","reportUrl":"../2776//#testresult/a3b5d588e8ab9178","status":"passed","time":{"start":1721266932543,"stop":1721267243705,"duration":311162}},{"uid":"e48ce68c779fffd3","reportUrl":"../2773//#testresult/e48ce68c779fffd3","status":"passed","time":{"start":1721180640694,"stop":1721180966068,"duration":325374}},{"uid":"da36c4e7b841f00c","reportUrl":"../2769//#testresult/da36c4e7b841f00c","status":"passed","time":{"start":1721093601712,"stop":1721093936803,"duration":335091}},{"uid":"1844f4501845ad09","reportUrl":"../2764//#testresult/1844f4501845ad09","status":"passed","time":{"start":1721007489579,"stop":1721007840133,"duration":350554}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"44a977bb406fadec.json","parameterValues":[]}