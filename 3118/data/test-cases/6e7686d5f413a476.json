{"uid":"6e7686d5f413a476","name":"test_upgrade_from_stable","fullName":"tests.integration.high_availability.test_upgrade_from_stable#test_upgrade_from_stable","historyId":"fe154b88a315bf4fc4617f727e70d7c2","time":{"start":1730079616408,"stop":1730080850329,"duration":1233921},"description":"Test updating from stable channel.","descriptionHtml":"<p>Test updating from stable channel.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] blocked: upgrade failed. Check logs for rollback instruction\n  mysql/1 [idle] waiting: other units upgrading first...\n  mysql/2 [idle] maintenance: upgrade completed","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 100, in test_upgrade_from_stable\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] blocked: upgrade failed. Check logs for rollback instruction\n  mysql/1 [idle] waiting: other units upgrading first...\n  mysql/2 [idle] maintenance: upgrade completed","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1730079185957,"stop":1730079185957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1730079185957,"stop":1730079185957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1730079185958,"stop":1730079186116,"duration":158},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1730079616407,"stop":1730079616407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test updating from stable channel.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] blocked: upgrade failed. Check logs for rollback instruction\n  mysql/1 [idle] waiting: other units upgrading first...\n  mysql/2 [idle] maintenance: upgrade completed","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 100, in test_upgrade_from_stable\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] blocked: upgrade failed. Check logs for rollback instruction\n  mysql/1 [idle] waiting: other units upgrading first...\n  mysql/2 [idle] maintenance: upgrade completed","steps":[],"attachments":[{"uid":"cfd875184dd7e1b8","name":"log","source":"cfd875184dd7e1b8.txt","type":"text/plain","size":13624}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1730080850332,"stop":1730080850332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1730080850333,"stop":1730080850880,"duration":547},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1730080850881,"stop":1730080850881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1730080850881,"stop":1730080850881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1730080850881,"stop":1730080850881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_from_stable"},{"name":"host","value":"fv-az1149-347"},{"name":"thread","value":"15921-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_from_stable"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"9f690146f740476f","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":7,"skipped":1,"passed":140,"unknown":3,"total":151},"items":[{"uid":"296b8b9a5f9acd37","reportUrl":"../3116//#testresult/296b8b9a5f9acd37","status":"passed","time":{"start":1729993177994,"stop":1729993454156,"duration":276162}},{"uid":"4719882f5483f849","reportUrl":"../3115//#testresult/4719882f5483f849","status":"passed","time":{"start":1729906775868,"stop":1729907007274,"duration":231406}},{"uid":"8be323bf26468958","reportUrl":"../3113//#testresult/8be323bf26468958","status":"passed","time":{"start":1729820511697,"stop":1729820794398,"duration":282701}},{"uid":"921714ab7ea9c455","reportUrl":"../3110//#testresult/921714ab7ea9c455","status":"passed","time":{"start":1729734017125,"stop":1729734259732,"duration":242607}},{"uid":"aa9892dce78f930c","reportUrl":"../3107//#testresult/aa9892dce78f930c","status":"passed","time":{"start":1729647518148,"stop":1729647750133,"duration":231985}},{"uid":"6f4c8f56128a5c36","reportUrl":"../3105//#testresult/6f4c8f56128a5c36","status":"unknown","time":{}},{"uid":"925f79ae899bb9b0","reportUrl":"../3104//#testresult/925f79ae899bb9b0","status":"passed","time":{"start":1729474731973,"stop":1729474992184,"duration":260211}},{"uid":"d319dde22da35f0c","reportUrl":"../3103//#testresult/d319dde22da35f0c","status":"passed","time":{"start":1729388330107,"stop":1729388575518,"duration":245411}},{"uid":"b1b7840b31305388","reportUrl":"../3102//#testresult/b1b7840b31305388","status":"passed","time":{"start":1729301948561,"stop":1729302193543,"duration":244982}},{"uid":"784bb385f3455db6","reportUrl":"../3097//#testresult/784bb385f3455db6","status":"passed","time":{"start":1729215496136,"stop":1729215736120,"duration":239984}},{"uid":"c95d210cd2cc837f","reportUrl":"../3093//#testresult/c95d210cd2cc837f","status":"passed","time":{"start":1729129156074,"stop":1729129399207,"duration":243133}},{"uid":"378216ee34bd18af","reportUrl":"../3090//#testresult/378216ee34bd18af","status":"passed","time":{"start":1729042717301,"stop":1729042959559,"duration":242258}},{"uid":"7abe6bf2b4005c50","reportUrl":"../3088//#testresult/7abe6bf2b4005c50","status":"passed","time":{"start":1728956513046,"stop":1728956785757,"duration":272711}},{"uid":"9eb131d7d619fd52","reportUrl":"../3086//#testresult/9eb131d7d619fd52","status":"passed","time":{"start":1728869880523,"stop":1728870142786,"duration":262263}},{"uid":"593417542d117fea","reportUrl":"../3085//#testresult/593417542d117fea","status":"passed","time":{"start":1728783532584,"stop":1728783781491,"duration":248907}},{"uid":"e7cf7053706d93ad","reportUrl":"../3084//#testresult/e7cf7053706d93ad","status":"passed","time":{"start":1728697056691,"stop":1728697285085,"duration":228394}},{"uid":"d052bf8cfa1c35f5","reportUrl":"../3081//#testresult/d052bf8cfa1c35f5","status":"passed","time":{"start":1728610740131,"stop":1728611003706,"duration":263575}},{"uid":"c271d2e6c26130d2","reportUrl":"../3078//#testresult/c271d2e6c26130d2","status":"passed","time":{"start":1728524283461,"stop":1728524526133,"duration":242672}},{"uid":"2e1ad7737a4d0b56","reportUrl":"../3075//#testresult/2e1ad7737a4d0b56","status":"passed","time":{"start":1728437975838,"stop":1728438239709,"duration":263871}},{"uid":"33d6d426cd6d0afa","reportUrl":"../3073//#testresult/33d6d426cd6d0afa","status":"passed","time":{"start":1728351530990,"stop":1728351775127,"duration":244137}}]},"tags":["asyncio","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"6e7686d5f413a476.json","parameterValues":[]}