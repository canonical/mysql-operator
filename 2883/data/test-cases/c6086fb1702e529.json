{"uid":"c6086fb1702e529","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_async_replication#test_build_and_deploy","historyId":"397dd6fb76b9bc4c6b9a194769795918","time":{"start":1723427217315,"stop":1723427849439,"duration":632124},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users\n  db2/2 [idle] blocked: Failed to initialize MySQL users","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 92, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users\n  db2/2 [idle] blocked: Failed to initialize MySQL users","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"tmp_path_factory","time":{"start":1723427216483,"stop":1723427216483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1723427216483,"stop":1723427216483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1723427216484,"stop":1723427216631,"duration":147},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1723427216632,"stop":1723427217314,"duration":682},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1723427216632,"stop":1723427216632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1723427217314,"stop":1723427217314,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users\n  db2/2 [idle] blocked: Failed to initialize MySQL users","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 92, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users\n  db2/2 [idle] blocked: Failed to initialize MySQL users","steps":[],"attachments":[{"uid":"ab34f609ec80196f","name":"log","source":"ab34f609ec80196f.txt","type":"text/plain","size":8423}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1723427849459,"stop":1723427849459,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1723427849476,"stop":1723427849495,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1723427849496,"stop":1723427850461,"duration":965},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1723427850462,"stop":1723427850462,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1723427850463,"stop":1723427850463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1723427850463,"stop":1723427850469,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az651-410"},{"name":"thread","value":"8796-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"48c1cc739f17855b","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":7,"skipped":0,"passed":72,"unknown":1,"total":80},"items":[{"uid":"cf62e4a889e2d11e","reportUrl":"../2882//#testresult/cf62e4a889e2d11e","status":"passed","time":{"start":1723340369568,"stop":1723340815358,"duration":445790}},{"uid":"f477eb463aa18c7a","reportUrl":"../2881//#testresult/f477eb463aa18c7a","status":"passed","time":{"start":1723254276008,"stop":1723254749510,"duration":473502}},{"uid":"9220eb4f8518a150","reportUrl":"../2877//#testresult/9220eb4f8518a150","status":"passed","time":{"start":1723168046899,"stop":1723168494646,"duration":447747}},{"uid":"7a669b9853b3c0a","reportUrl":"../2859//#testresult/7a669b9853b3c0a","status":"passed","time":{"start":1722908589762,"stop":1722909035981,"duration":446219}},{"uid":"f839e1d6cf6c82d6","reportUrl":"../2850//#testresult/f839e1d6cf6c82d6","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] unknown: \n  db1/1 [idle] unknown: \n  db1/2 [idle] unknown:","time":{"start":1722823105511,"stop":1722823705863,"duration":600352}},{"uid":"e66aa2a4fdc3a133","reportUrl":"../2849//#testresult/e66aa2a4fdc3a133","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] unknown: \n  db2/1 [idle] unknown: \n  db2/2 [idle] unknown:","time":{"start":1722735882467,"stop":1722736483320,"duration":600853}},{"uid":"b563cd0c5985b728","reportUrl":"../2848//#testresult/b563cd0c5985b728","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] unknown: \n  db1/1 [idle] unknown: \n  db1/2 [idle] unknown:","time":{"start":1722649316359,"stop":1722649916808,"duration":600449}},{"uid":"969564a3b4e7a3d1","reportUrl":"../2841//#testresult/969564a3b4e7a3d1","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] unknown: \n  db2/1 [idle] unknown: \n  db2/2 [idle] unknown:","time":{"start":1722562826977,"stop":1722563427532,"duration":600555}},{"uid":"59c438674dae9595","reportUrl":"../2839//#testresult/59c438674dae9595","status":"passed","time":{"start":1722476152882,"stop":1722476552057,"duration":399175}},{"uid":"55d1be587a9ace6e","reportUrl":"../2836//#testresult/55d1be587a9ace6e","status":"passed","time":{"start":1722389411141,"stop":1722389808314,"duration":397173}},{"uid":"47156c04db150cc8","reportUrl":"../2832//#testresult/47156c04db150cc8","status":"passed","time":{"start":1722303349074,"stop":1722303748835,"duration":399761}},{"uid":"f5e643cec8b1a2f7","reportUrl":"../2827//#testresult/f5e643cec8b1a2f7","status":"passed","time":{"start":1722217008911,"stop":1722217405544,"duration":396633}},{"uid":"b74d7941e051e5f1","reportUrl":"../2824//#testresult/b74d7941e051e5f1","status":"passed","time":{"start":1722131063086,"stop":1722131438798,"duration":375712}},{"uid":"ee2a6f2d438dd3b8","reportUrl":"../2819//#testresult/ee2a6f2d438dd3b8","status":"passed","time":{"start":1722043845000,"stop":1722044216508,"duration":371508}},{"uid":"a05f5b565e29d642","reportUrl":"../2811//#testresult/a05f5b565e29d642","status":"passed","time":{"start":1721957931100,"stop":1721958332615,"duration":401515}},{"uid":"4ce7dba40fc81426","reportUrl":"../2807//#testresult/4ce7dba40fc81426","status":"passed","time":{"start":1721871246747,"stop":1721871655953,"duration":409206}},{"uid":"87b1e4e13b22d355","reportUrl":"../2802//#testresult/87b1e4e13b22d355","status":"passed","time":{"start":1721785104544,"stop":1721785526452,"duration":421908}},{"uid":"912a768b35e74e1c","reportUrl":"../2797//#testresult/912a768b35e74e1c","status":"passed","time":{"start":1721698493324,"stop":1721698885659,"duration":392335}},{"uid":"1640209a34b138bc","reportUrl":"../2787//#testresult/1640209a34b138bc","status":"passed","time":{"start":1721612071836,"stop":1721612484894,"duration":413058}},{"uid":"b3bbb883b22edf8d","reportUrl":"../2786//#testresult/b3bbb883b22edf8d","status":"passed","time":{"start":1721525696649,"stop":1721526093571,"duration":396922}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"c6086fb1702e529.json","parameterValues":[]}