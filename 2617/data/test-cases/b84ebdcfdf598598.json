{"uid":"b84ebdcfdf598598","name":"test_cluster_isolation","fullName":"tests.integration.high_availability.test_replication#test_cluster_isolation","historyId":"135d9251eb347937e465a64ddaf59612","time":{"start":1718242401576,"stop":1718242700787,"duration":299211},"description":"Test for cluster data isolation.\n\n    This test creates a new cluster, create a new table on both cluster, write a single record with\n    the application name for each cluster, retrieve and compare these records, asserting they are\n    not the same.\n    ","descriptionHtml":"<p>Test for cluster data isolation.</p>\n<pre><code>This test creates a new cluster, create a new table on both cluster, write a single record with\nthe application name for each cluster, retrieve and compare these records, asserting they are\nnot the same.\n</code></pre>\n","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in error: mysql/2","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 285, in test_cluster_isolation\n    app, _ = await high_availability_test_setup(ops_test, mysql_charm_series)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 231, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test, mysql_charm_series)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 150, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2751, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2657, in _raise_for_status\n    raise error_type(\"{}{} in {}: {}\".format(\njuju.errors.JujuUnitError: Unit in error: mysql/2","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1718242401427,"stop":1718242401427,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1718242401428,"stop":1718242401575,"duration":147},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1718242401428,"stop":1718242401428,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1718242401428,"stop":1718242401428,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mysql_charm_series","time":{"start":1718242401428,"stop":1718242401428,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1718242401575,"stop":1718242401575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1718242401575,"stop":1718242401575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test for cluster data isolation.\n\n    This test creates a new cluster, create a new table on both cluster, write a single record with\n    the application name for each cluster, retrieve and compare these records, asserting they are\n    not the same.\n    ","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in error: mysql/2","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 285, in test_cluster_isolation\n    app, _ = await high_availability_test_setup(ops_test, mysql_charm_series)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 231, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test, mysql_charm_series)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 150, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2751, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2657, in _raise_for_status\n    raise error_type(\"{}{} in {}: {}\".format(\njuju.errors.JujuUnitError: Unit in error: mysql/2","steps":[],"attachments":[{"uid":"3a9b6ff590de080b","name":"log","source":"3a9b6ff590de080b.txt","type":"text/plain","size":8987}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"ops_test::finalizer","time":{"start":1718242700803,"stop":1718242701631,"duration":828},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1718242700803,"stop":1718242700803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1718242701632,"stop":1718242701632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1718242701632,"stop":1718242701632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1718242701632,"stop":1718242701632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(3)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_replication"},{"name":"host","value":"fv-az840-328"},{"name":"thread","value":"8835-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":22,"unknown":0,"total":23},"items":[{"uid":"f2f965c620f436c7","reportUrl":"../2615//#testresult/f2f965c620f436c7","status":"passed","time":{"start":1718155990984,"stop":1718156689862,"duration":698878}},{"uid":"ae2685c2ac0a6568","reportUrl":"../2609//#testresult/ae2685c2ac0a6568","status":"passed","time":{"start":1718070150537,"stop":1718071033284,"duration":882747}},{"uid":"8a6dcffbd123a282","reportUrl":"../2604//#testresult/8a6dcffbd123a282","status":"passed","time":{"start":1717983185345,"stop":1717983872688,"duration":687343}},{"uid":"99552fdc353b3841","reportUrl":"../2601//#testresult/99552fdc353b3841","status":"passed","time":{"start":1717810287993,"stop":1717810891718,"duration":603725}},{"uid":"ac32aec5314d8ea9","reportUrl":"../2594//#testresult/ac32aec5314d8ea9","status":"passed","time":{"start":1717724309313,"stop":1717725126268,"duration":816955}},{"uid":"18818abc0eb018e8","reportUrl":"../2584//#testresult/18818abc0eb018e8","status":"passed","time":{"start":1717551154405,"stop":1717551873375,"duration":718970}},{"uid":"5e84748292bae374","reportUrl":"../2582//#testresult/5e84748292bae374","status":"passed","time":{"start":1717465496154,"stop":1717466250471,"duration":754317}},{"uid":"6454d901cb89bb62","reportUrl":"../2577//#testresult/6454d901cb89bb62","status":"passed","time":{"start":1717378222472,"stop":1717378846235,"duration":623763}},{"uid":"70b5521c2f31ae73","reportUrl":"../2576//#testresult/70b5521c2f31ae73","status":"passed","time":{"start":1717291745285,"stop":1717292379636,"duration":634351}},{"uid":"7a1dce52cb435c69","reportUrl":"../2575//#testresult/7a1dce52cb435c69","status":"passed","time":{"start":1717205360149,"stop":1717205979060,"duration":618911}},{"uid":"6e53e1c095e7c354","reportUrl":"../2572//#testresult/6e53e1c095e7c354","status":"passed","time":{"start":1717118895301,"stop":1717119544736,"duration":649435}},{"uid":"b52303806f422796","reportUrl":"../2565//#testresult/b52303806f422796","status":"passed","time":{"start":1716946086195,"stop":1716946665801,"duration":579606}},{"uid":"a772fee138b362bc","reportUrl":"../2562//#testresult/a772fee138b362bc","status":"passed","time":{"start":1716859789578,"stop":1716860433356,"duration":643778}},{"uid":"6852c154be0de295","reportUrl":"../2559//#testresult/6852c154be0de295","status":"passed","time":{"start":1716773569945,"stop":1716774129650,"duration":559705}},{"uid":"df9a775653647117","reportUrl":"../2558//#testresult/df9a775653647117","status":"passed","time":{"start":1716686959448,"stop":1716687573668,"duration":614220}},{"uid":"ff8b20c9600bee71","reportUrl":"../2557//#testresult/ff8b20c9600bee71","status":"passed","time":{"start":1716601092954,"stop":1716601711671,"duration":618717}},{"uid":"513fc65037b3bcbd","reportUrl":"../2553//#testresult/513fc65037b3bcbd","status":"passed","time":{"start":1716514184820,"stop":1716514772311,"duration":587491}},{"uid":"22f609d36ada3027","reportUrl":"../2550//#testresult/22f609d36ada3027","status":"passed","time":{"start":1716427786068,"stop":1716428371537,"duration":585469}},{"uid":"9287187f93891788","reportUrl":"../2545//#testresult/9287187f93891788","status":"passed","time":{"start":1716341269238,"stop":1716341820742,"duration":551504}},{"uid":"b88cd25886ec05ea","reportUrl":"../2543//#testresult/b88cd25886ec05ea","status":"passed","time":{"start":1716254918483,"stop":1716255479572,"duration":561089}}]},"tags":["group(3)","asyncio"]},"source":"b84ebdcfdf598598.json","parameterValues":[]}