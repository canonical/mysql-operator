{"uid":"3e5d1ea6f98ffc26","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_async_replication#test_build_and_deploy","historyId":"397dd6fb76b9bc4c6b9a194769795918","time":{"start":1718760535932,"stop":1718761166778,"duration":630846},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 88, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1718760535503,"stop":1718760535503,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1718760535503,"stop":1718760535503,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1718760535504,"stop":1718760535642,"duration":138},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1718760535504,"stop":1718760535504,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1718760535642,"stop":1718760535931,"duration":289},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1718760535642,"stop":1718760535642,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1718760535642,"stop":1718760535642,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1718760535932,"stop":1718760535932,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 88, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users","steps":[],"attachments":[{"uid":"94a8e64f2d63de58","name":"log","source":"94a8e64f2d63de58.txt","type":"text/plain","size":7468}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1718761166782,"stop":1718761166782,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1718761166799,"stop":1718761166815,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1718761166816,"stop":1718761168398,"duration":1582},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1718761168399,"stop":1718761168399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1718761168399,"stop":1718761168399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1718761168399,"stop":1718761168399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1456-248"},{"name":"thread","value":"6896-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":29,"unknown":0,"total":30},"items":[{"uid":"6975445c89fdcf5","reportUrl":"../2628//#testresult/6975445c89fdcf5","status":"passed","time":{"start":1718674195797,"stop":1718674583671,"duration":387874}},{"uid":"a5217ad51d600c40","reportUrl":"../2626//#testresult/a5217ad51d600c40","status":"passed","time":{"start":1718587733178,"stop":1718588147710,"duration":414532}},{"uid":"527824f2565cac59","reportUrl":"../2625//#testresult/527824f2565cac59","status":"passed","time":{"start":1718501377068,"stop":1718501750871,"duration":373803}},{"uid":"613d746a64803e16","reportUrl":"../2624//#testresult/613d746a64803e16","status":"passed","time":{"start":1718414942147,"stop":1718415334482,"duration":392335}},{"uid":"4de1532ff36e94b4","reportUrl":"../2621//#testresult/4de1532ff36e94b4","status":"passed","time":{"start":1718328995730,"stop":1718329376019,"duration":380289}},{"uid":"238b7b20a7408b0","reportUrl":"../2615//#testresult/238b7b20a7408b0","status":"passed","time":{"start":1718156290981,"stop":1718156738803,"duration":447822}},{"uid":"c27257d351e96f59","reportUrl":"../2609//#testresult/c27257d351e96f59","status":"passed","time":{"start":1718069663785,"stop":1718070149094,"duration":485309}},{"uid":"6a897df4558a4e0","reportUrl":"../2604//#testresult/6a897df4558a4e0","status":"passed","time":{"start":1717983249421,"stop":1717983769504,"duration":520083}},{"uid":"c38b7a2348c2f472","reportUrl":"../2603//#testresult/c38b7a2348c2f472","status":"passed","time":{"start":1717897511505,"stop":1717897965627,"duration":454122}},{"uid":"cd8b1d143542b1fb","reportUrl":"../2601//#testresult/cd8b1d143542b1fb","status":"passed","time":{"start":1717810217833,"stop":1717810647496,"duration":429663}},{"uid":"98565631979e764c","reportUrl":"../2594//#testresult/98565631979e764c","status":"passed","time":{"start":1717724170028,"stop":1717724669812,"duration":499784}},{"uid":"9e47140a4fdadeef","reportUrl":"../2591//#testresult/9e47140a4fdadeef","status":"passed","time":{"start":1717637366824,"stop":1717637801034,"duration":434210}},{"uid":"e9d7614e54ebe3ba","reportUrl":"../2584//#testresult/e9d7614e54ebe3ba","status":"passed","time":{"start":1717551573034,"stop":1717552059267,"duration":486233}},{"uid":"60b3bc422abacaa4","reportUrl":"../2582//#testresult/60b3bc422abacaa4","status":"passed","time":{"start":1717466638835,"stop":1717467089975,"duration":451140}},{"uid":"9121ab5b142ec44b","reportUrl":"../2577//#testresult/9121ab5b142ec44b","status":"passed","time":{"start":1717379283082,"stop":1717379723281,"duration":440199}},{"uid":"771f540bc97eeca","reportUrl":"../2576//#testresult/771f540bc97eeca","status":"passed","time":{"start":1717291864810,"stop":1717292302925,"duration":438115}},{"uid":"91beed4e3d34847a","reportUrl":"../2575//#testresult/91beed4e3d34847a","status":"passed","time":{"start":1717205413145,"stop":1717205843598,"duration":430453}},{"uid":"831fb1ab64108cf","reportUrl":"../2572//#testresult/831fb1ab64108cf","status":"passed","time":{"start":1717118972740,"stop":1717119390594,"duration":417854}},{"uid":"9372d7c586d5f86d","reportUrl":"../2568//#testresult/9372d7c586d5f86d","status":"passed","time":{"start":1717032511911,"stop":1717032930621,"duration":418710}},{"uid":"86b49da9c0136893","reportUrl":"../2565//#testresult/86b49da9c0136893","status":"passed","time":{"start":1716946088209,"stop":1716946499002,"duration":410793}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"3e5d1ea6f98ffc26.json","parameterValues":[]}