{"uid":"5a9ca1cb92a92e48","name":"test_build_and_deploy","fullName":"tests.integration.relations.test_database#test_build_and_deploy","historyId":"bdfc2af63e333d3ba27ec17869a51075","time":{"start":1727055113585,"stop":1727056027894,"duration":914309},"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","descriptionHtml":"<p>Build the charm and deploy 3 units to ensure a cluster is formed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] active: \n  mysql/1 [executing] maintenance: Installing MySQL\n  mysql/2 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/relations/test_database.py\", line 81, in test_build_and_deploy\n    await asyncio.gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] active: \n  mysql/1 [executing] maintenance: Installing MySQL\n  mysql/2 [idle] active: Primary","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1727055113433,"stop":1727055113434,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1727055113434,"stop":1727055113434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1727055113434,"stop":1727055113584,"duration":150},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1727055113584,"stop":1727055113584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] active: \n  mysql/1 [executing] maintenance: Installing MySQL\n  mysql/2 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/relations/test_database.py\", line 81, in test_build_and_deploy\n    await asyncio.gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] active: \n  mysql/1 [executing] maintenance: Installing MySQL\n  mysql/2 [idle] active: Primary","steps":[],"attachments":[{"uid":"61ae19dac4b65659","name":"log","source":"61ae19dac4b65659.txt","type":"text/plain","size":7058}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1727056027924,"stop":1727056027924,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1727056027937,"stop":1727056028245,"duration":308},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1727056028245,"stop":1727056028246,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1727056028246,"stop":1727056028246,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1727056028246,"stop":1727056028246,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"skip_if_deployed"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.relations"},{"name":"suite","value":"test_database"},{"name":"host","value":"fv-az914-180"},{"name":"thread","value":"10044-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.relations.test_database"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"cb0f64c4837db533","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":5,"skipped":0,"passed":108,"unknown":3,"total":116},"items":[{"uid":"711cca925e4b8ab7","reportUrl":"../3022//#testresult/711cca925e4b8ab7","status":"passed","time":{"start":1726968678451,"stop":1726969059845,"duration":381394}},{"uid":"6389fd0d8382f41a","reportUrl":"../3021//#testresult/6389fd0d8382f41a","status":"passed","time":{"start":1726882228201,"stop":1726882612754,"duration":384553}},{"uid":"d317c2d119c36be6","reportUrl":"../3018//#testresult/d317c2d119c36be6","status":"passed","time":{"start":1726795885949,"stop":1726796268671,"duration":382722}},{"uid":"aa4798e19733f163","reportUrl":"../3015//#testresult/aa4798e19733f163","status":"passed","time":{"start":1726709461028,"stop":1726709860072,"duration":399044}},{"uid":"20340d5edb851f5b","reportUrl":"../3012//#testresult/20340d5edb851f5b","status":"passed","time":{"start":1726623071114,"stop":1726623466322,"duration":395208}},{"uid":"787602570385b391","reportUrl":"../3010//#testresult/787602570385b391","status":"passed","time":{"start":1726536648758,"stop":1726537042473,"duration":393715}},{"uid":"1a55e57e8bcfa23e","reportUrl":"../3008//#testresult/1a55e57e8bcfa23e","status":"passed","time":{"start":1726450287033,"stop":1726450669446,"duration":382413}},{"uid":"82830e9a7247c1b7","reportUrl":"../3007//#testresult/82830e9a7247c1b7","status":"passed","time":{"start":1726363938457,"stop":1726364329516,"duration":391059}},{"uid":"c42dfecf8b141df0","reportUrl":"../3006//#testresult/c42dfecf8b141df0","status":"passed","time":{"start":1726277454817,"stop":1726277842848,"duration":388031}},{"uid":"41d1ae7194816de5","reportUrl":"../3000//#testresult/41d1ae7194816de5","status":"passed","time":{"start":1726191200976,"stop":1726191592910,"duration":391934}},{"uid":"f452cf20fdbab9c2","reportUrl":"../2998//#testresult/f452cf20fdbab9c2","status":"passed","time":{"start":1726104668756,"stop":1726105049496,"duration":380740}},{"uid":"fca6bd1346962e42","reportUrl":"../2992//#testresult/fca6bd1346962e42","status":"passed","time":{"start":1726018289140,"stop":1726018656630,"duration":367490}},{"uid":"a77e14d4b40aac78","reportUrl":"../2982//#testresult/a77e14d4b40aac78","status":"passed","time":{"start":1725845515580,"stop":1725845904578,"duration":388998}},{"uid":"3823b5eacd5695c0","reportUrl":"../2980//#testresult/3823b5eacd5695c0","status":"passed","time":{"start":1725672942324,"stop":1725673320357,"duration":378033}},{"uid":"f67326807e67184d","reportUrl":"../2977//#testresult/f67326807e67184d","status":"passed","time":{"start":1725586257206,"stop":1725586645053,"duration":387847}},{"uid":"a90a1faf37235dc5","reportUrl":"../2974//#testresult/a90a1faf37235dc5","status":"passed","time":{"start":1725499882249,"stop":1725500252418,"duration":370169}},{"uid":"a2acf0fde9f0b698","reportUrl":"../2968//#testresult/a2acf0fde9f0b698","status":"passed","time":{"start":1725413466553,"stop":1725413817995,"duration":351442}},{"uid":"124afc5d0fef7547","reportUrl":"../2961//#testresult/124afc5d0fef7547","status":"passed","time":{"start":1725240659277,"stop":1725241008170,"duration":348893}},{"uid":"229923f54be1a5df","reportUrl":"../2960//#testresult/229923f54be1a5df","status":"passed","time":{"start":1725154394765,"stop":1725154765561,"duration":370796}},{"uid":"bea7f57a095615cb","reportUrl":"../2959//#testresult/bea7f57a095615cb","status":"passed","time":{"start":1725067812821,"stop":1725068146610,"duration":333789}}]},"tags":["skip_if_deployed","asyncio","abort_on_fail","group(1)"]},"source":"5a9ca1cb92a92e48.json","parameterValues":[]}