{"uid":"ff76a82ce72f0abd","name":"test_deploy_latest","fullName":"tests.integration.high_availability.test_upgrade#test_deploy_latest","historyId":"4de377097c80900251c8c87ce650913d","time":{"start":1731634232280,"stop":1731635435518,"duration":1203238},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [allocating] waiting: agent initialising\n  mysql/1 [allocating] waiting: agent initialising\n  mysql/2 [allocating] waiting: agent initialising\n  mysql-test-app/0 [idle] waiting:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade.py\", line 57, in test_deploy_latest\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 213, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [allocating] waiting: agent initialising\n  mysql/1 [allocating] waiting: agent initialising\n  mysql/2 [allocating] waiting: agent initialising\n  mysql-test-app/0 [idle] waiting:","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1731634232137,"stop":1731634232138,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1731634232138,"stop":1731634232279,"duration":141},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1731634232138,"stop":1731634232138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1731634232280,"stop":1731634232280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [allocating] waiting: agent initialising\n  mysql/1 [allocating] waiting: agent initialising\n  mysql/2 [allocating] waiting: agent initialising\n  mysql-test-app/0 [idle] waiting:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade.py\", line 57, in test_deploy_latest\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 213, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [allocating] waiting: agent initialising\n  mysql/1 [allocating] waiting: agent initialising\n  mysql/2 [allocating] waiting: agent initialising\n  mysql-test-app/0 [idle] waiting:","steps":[],"attachments":[{"uid":"66579a703eee4bb2","name":"log","source":"66579a703eee4bb2.txt","type":"text/plain","size":10672}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1731635435545,"stop":1731635435545,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1731635435553,"stop":1731635435834,"duration":281},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1731635435834,"stop":1731635435834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1731635435834,"stop":1731635435834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1731635435834,"stop":1731635435834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade"},{"name":"host","value":"fv-az575-502"},{"name":"thread","value":"15941-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"1e0853bec65eaee8","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":164,"unknown":4,"total":169},"items":[{"uid":"ce30a942ca2a978","reportUrl":"../3146//#testresult/ce30a942ca2a978","status":"passed","time":{"start":1731547753922,"stop":1731548154082,"duration":400160}},{"uid":"aa80f21acd5df2e","reportUrl":"../3142//#testresult/aa80f21acd5df2e","status":"passed","time":{"start":1731461361356,"stop":1731461751122,"duration":389766}},{"uid":"34586a13f85a7bae","reportUrl":"../3141//#testresult/34586a13f85a7bae","status":"passed","time":{"start":1731375155007,"stop":1731375582274,"duration":427267}},{"uid":"26c3bc89bd9b64f3","reportUrl":"../3138//#testresult/26c3bc89bd9b64f3","status":"passed","time":{"start":1731288753119,"stop":1731289166704,"duration":413585}},{"uid":"4231b510c9238092","reportUrl":"../3137//#testresult/4231b510c9238092","status":"passed","time":{"start":1731202467375,"stop":1731202860252,"duration":392877}},{"uid":"df0361d57289268d","reportUrl":"../3136//#testresult/df0361d57289268d","status":"passed","time":{"start":1731115909177,"stop":1731116334107,"duration":424930}},{"uid":"f4e875dc28d143eb","reportUrl":"../3135//#testresult/f4e875dc28d143eb","status":"unknown","time":{}},{"uid":"17fcb94b9de1d08","reportUrl":"../3133//#testresult/17fcb94b9de1d08","status":"unknown","time":{}},{"uid":"7eddfe46c37d9373","reportUrl":"../3132//#testresult/7eddfe46c37d9373","status":"passed","time":{"start":1730856737237,"stop":1730857167223,"duration":429986}},{"uid":"bef35639e1417e11","reportUrl":"../3131//#testresult/bef35639e1417e11","status":"passed","time":{"start":1730770746936,"stop":1730771186763,"duration":439827}},{"uid":"b98d2f309e75e4fc","reportUrl":"../3130//#testresult/b98d2f309e75e4fc","status":"passed","time":{"start":1730684073692,"stop":1730684501847,"duration":428155}},{"uid":"1dc852db8c57b610","reportUrl":"../3128//#testresult/1dc852db8c57b610","status":"passed","time":{"start":1730597571559,"stop":1730597982534,"duration":410975}},{"uid":"8028ec0de91d93","reportUrl":"../3127//#testresult/8028ec0de91d93","status":"passed","time":{"start":1730511133542,"stop":1730511537308,"duration":403766}},{"uid":"e331edb1bdcfdb02","reportUrl":"../3125//#testresult/e331edb1bdcfdb02","status":"passed","time":{"start":1730424733965,"stop":1730425136584,"duration":402619}},{"uid":"aa202c2fe42b06bb","reportUrl":"../3123//#testresult/aa202c2fe42b06bb","status":"passed","time":{"start":1730338368262,"stop":1730338781586,"duration":413324}},{"uid":"674ba4a81f0ef395","reportUrl":"../3121//#testresult/674ba4a81f0ef395","status":"passed","time":{"start":1730251927451,"stop":1730252329341,"duration":401890}},{"uid":"6f635d5ff8a61363","reportUrl":"../3119//#testresult/6f635d5ff8a61363","status":"passed","time":{"start":1730165520293,"stop":1730165922005,"duration":401712}},{"uid":"dcb573a33df88d52","reportUrl":"../3118//#testresult/dcb573a33df88d52","status":"passed","time":{"start":1730079181857,"stop":1730079594361,"duration":412504}},{"uid":"a03f4a19bb753f41","reportUrl":"../3116//#testresult/a03f4a19bb753f41","status":"passed","time":{"start":1729992747927,"stop":1729993132001,"duration":384074}},{"uid":"a31ec0ac355f5cb5","reportUrl":"../3115//#testresult/a31ec0ac355f5cb5","status":"passed","time":{"start":1729906404095,"stop":1729906842692,"duration":438597}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"ff76a82ce72f0abd.json","parameterValues":[]}