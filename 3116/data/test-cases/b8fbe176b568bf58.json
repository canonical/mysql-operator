{"uid":"b8fbe176b568bf58","name":"test_refresh_without_pre_upgrade_check","fullName":"tests.integration.high_availability.test_upgrade_skip_pre_upgrade_check#test_refresh_without_pre_upgrade_check","historyId":"887600644f5eb8379ebe702282e8fbb1","time":{"start":1729993119949,"stop":1729993594524,"duration":474575},"description":"Test updating from stable channel.","descriptionHtml":"<p>Test updating from stable channel.</p>\n","status":"broken","statusMessage":"mysql.connector.errors.DatabaseError: 2003 (HY000): Can't connect to MySQL server on '10.244.248.197:3306' (111)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 291, in _open_connection\n    self._cmysql.connect(**cnx_kwargs)\n_mysql_connector.MySQLInterfaceError: Can't connect to MySQL server on '10.244.248.197:3306' (111)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_skip_pre_upgrade_check.py\", line 89, in test_refresh_without_pre_upgrade_check\n    await ensure_all_units_continuous_writes_incrementing(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 360, in ensure_all_units_continuous_writes_incrementing\n    for attempt in Retrying(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 325, in iter\n    raise retry_exc.reraise()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 158, in reraise\n    raise self.last_attempt.result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n    raise self._exception\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 365, in ensure_all_units_continuous_writes_incrementing\n    max_written_value = await get_max_written_value_in_database(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 53, in get_max_written_value_in_database\n    output = await execute_queries_on_unit(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/helpers.py\", line 231, in execute_queries_on_unit\n    with MysqlConnector(config, commit) as cursor:\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/connector.py\", line 32, in __enter__\n    self.connection = mysql.connector.connect(**self.config)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/pooling.py\", line 293, in connect\n    return CMySQLConnection(*args, **kwargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 120, in __init__\n    self.connect(**kwargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/abstracts.py\", line 1181, in connect\n    self._open_connection()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 296, in _open_connection\n    raise get_mysql_exception(\nmysql.connector.errors.DatabaseError: 2003 (HY000): Can't connect to MySQL server on '10.244.248.197:3306' (111)","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1729992748425,"stop":1729992748425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1729992748425,"stop":1729992748557,"duration":132},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1729992748425,"stop":1729992748425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1729993119949,"stop":1729993119949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test updating from stable channel.","status":"broken","statusMessage":"mysql.connector.errors.DatabaseError: 2003 (HY000): Can't connect to MySQL server on '10.244.248.197:3306' (111)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 291, in _open_connection\n    self._cmysql.connect(**cnx_kwargs)\n_mysql_connector.MySQLInterfaceError: Can't connect to MySQL server on '10.244.248.197:3306' (111)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_upgrade_skip_pre_upgrade_check.py\", line 89, in test_refresh_without_pre_upgrade_check\n    await ensure_all_units_continuous_writes_incrementing(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 360, in ensure_all_units_continuous_writes_incrementing\n    for attempt in Retrying(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 325, in iter\n    raise retry_exc.reraise()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 158, in reraise\n    raise self.last_attempt.result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n    raise self._exception\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 365, in ensure_all_units_continuous_writes_incrementing\n    max_written_value = await get_max_written_value_in_database(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 53, in get_max_written_value_in_database\n    output = await execute_queries_on_unit(\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/helpers.py\", line 231, in execute_queries_on_unit\n    with MysqlConnector(config, commit) as cursor:\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/connector.py\", line 32, in __enter__\n    self.connection = mysql.connector.connect(**self.config)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/pooling.py\", line 293, in connect\n    return CMySQLConnection(*args, **kwargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 120, in __init__\n    self.connect(**kwargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/abstracts.py\", line 1181, in connect\n    self._open_connection()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/mysql/connector/connection_cext.py\", line 296, in _open_connection\n    raise get_mysql_exception(\nmysql.connector.errors.DatabaseError: 2003 (HY000): Can't connect to MySQL server on '10.244.248.197:3306' (111)","steps":[],"attachments":[{"uid":"30a860f950039507","name":"log","source":"30a860f950039507.txt","type":"text/plain","size":1425}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1729993594564,"stop":1729993594564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1729993606802,"stop":1729993607140,"duration":338},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1729993607141,"stop":1729993607141,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1729993607141,"stop":1729993607141,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1729993607141,"stop":1729993607141,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_skip_pre_upgrade_check"},{"name":"host","value":"fv-az736-645"},{"name":"thread","value":"15886-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_skip_pre_upgrade_check"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f4605a357dd95567","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":30,"unknown":0,"total":31},"items":[{"uid":"f01da45e4592c672","reportUrl":"../3115//#testresult/f01da45e4592c672","status":"passed","time":{"start":1729906760359,"stop":1729906893337,"duration":132978}},{"uid":"72225acdcd5131d4","reportUrl":"../3113//#testresult/72225acdcd5131d4","status":"passed","time":{"start":1729820300299,"stop":1729820463476,"duration":163177}},{"uid":"dc35b99e993b1213","reportUrl":"../3110//#testresult/dc35b99e993b1213","status":"passed","time":{"start":1729733979970,"stop":1729734133097,"duration":153127}},{"uid":"5200953083d10b81","reportUrl":"../3107//#testresult/5200953083d10b81","status":"passed","time":{"start":1729647515526,"stop":1729647648631,"duration":133105}},{"uid":"9fc5b988ce100ca8","reportUrl":"../3105//#testresult/9fc5b988ce100ca8","status":"passed","time":{"start":1729561579952,"stop":1729561713959,"duration":134007}},{"uid":"a3a0ae7bbcef2ee5","reportUrl":"../3104//#testresult/a3a0ae7bbcef2ee5","status":"passed","time":{"start":1729474715362,"stop":1729474858142,"duration":142780}},{"uid":"c52ec851b7767f13","reportUrl":"../3103//#testresult/c52ec851b7767f13","status":"passed","time":{"start":1729388256071,"stop":1729388388262,"duration":132191}},{"uid":"1959658e30828723","reportUrl":"../3102//#testresult/1959658e30828723","status":"passed","time":{"start":1729301960377,"stop":1729302092560,"duration":132183}},{"uid":"2aca26c66caa945c","reportUrl":"../3097//#testresult/2aca26c66caa945c","status":"passed","time":{"start":1729215575240,"stop":1729215707653,"duration":132413}},{"uid":"42795be8fafaea5","reportUrl":"../3093//#testresult/42795be8fafaea5","status":"passed","time":{"start":1729129070844,"stop":1729129203427,"duration":132583}},{"uid":"680015a41bf595cc","reportUrl":"../3090//#testresult/680015a41bf595cc","status":"passed","time":{"start":1729042677085,"stop":1729042811647,"duration":134562}},{"uid":"89b003ffde63d416","reportUrl":"../3088//#testresult/89b003ffde63d416","status":"passed","time":{"start":1728956459899,"stop":1728956593533,"duration":133634}},{"uid":"e1b439d194667e86","reportUrl":"../3086//#testresult/e1b439d194667e86","status":"passed","time":{"start":1728869840253,"stop":1728869973587,"duration":133334}},{"uid":"6083183177738bc6","reportUrl":"../3085//#testresult/6083183177738bc6","status":"passed","time":{"start":1728783635165,"stop":1728783768601,"duration":133436}},{"uid":"a98bd98b9671d2c2","reportUrl":"../3084//#testresult/a98bd98b9671d2c2","status":"passed","time":{"start":1728697055475,"stop":1728697218276,"duration":162801}},{"uid":"b3079c24f821906b","reportUrl":"../3081//#testresult/b3079c24f821906b","status":"passed","time":{"start":1728610760116,"stop":1728610893179,"duration":133063}},{"uid":"d393a045c1ed02f4","reportUrl":"../3078//#testresult/d393a045c1ed02f4","status":"passed","time":{"start":1728524256951,"stop":1728524388848,"duration":131897}},{"uid":"54c41d5f71b8b91","reportUrl":"../3075//#testresult/54c41d5f71b8b91","status":"passed","time":{"start":1728438459601,"stop":1728438591323,"duration":131722}},{"uid":"9738c276a45da3e7","reportUrl":"../3073//#testresult/9738c276a45da3e7","status":"passed","time":{"start":1728351515462,"stop":1728351647847,"duration":132385}},{"uid":"bf28a6912a62c9b9","reportUrl":"../3066//#testresult/bf28a6912a62c9b9","status":"passed","time":{"start":1728265075029,"stop":1728265210440,"duration":135411}}]},"tags":["asyncio","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"b8fbe176b568bf58.json","parameterValues":[]}