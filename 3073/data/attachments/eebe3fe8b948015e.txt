[32mINFO    [0m integration.high_availability.test_async_replication:test_async_replication.py:60 Destroying second model
[32mINFO    [0m pytest_operator.plugin:plugin.py:790 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.5.4    unsupported  01:43:21Z

App  Version          Status  Scale  Charm  Channel  Rev  Exposed  Message
db1  8.0.37-0ubun...  active      3  mysql             0  no       

Unit    Workload  Agent  Machine  Public address  Ports           Message
db1/0*  active    idle   0        10.114.241.185  3306,33060/tcp  Primary
db1/1   active    idle   1        10.114.241.136  3306,33060/tcp  
db1/2   blocked   idle   2        10.114.241.180                  Failed to initialize MySQL users

Machine  State    Address         Inst id        Base          AZ  Message
0        started  10.114.241.185  juju-221008-0  ubuntu@22.04      Running
1        started  10.114.241.136  juju-221008-1  ubuntu@22.04      Running
2        started  10.114.241.180  juju-221008-2  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:796 Juju error logs:

machine-0: 01:37:55 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:37:55 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-db1-0: 01:37:55 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:37:56 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:37:56 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-db1-2: 01:37:57 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 01:38:37 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:38:37 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-db1-1: 01:38:37 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-db1-2: 01:39:36 ERROR unit.db1/2.juju-log Failed to configure users for: juju-221008-2.lxd with error mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/snap/charmed-mysql/common/var/run/mysqld/mysqld.sock' (2)
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-db1-2/charm/src/mysql_vm_helpers.py", line 755, in _run_mysqlcli_script
    return subprocess.check_output(
  File "/usr/lib/python3.10/subprocess.py", line 421, in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
  File "/usr/lib/python3.10/subprocess.py", line 526, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['charmed-mysql.mysql', '-u', 'root', '--protocol=SOCKET', '--socket=/var/snap/charmed-mysql/common/var/run/mysqld/mysqld.sock', '-e', "CREATE USER 'serverconfig'@'%' IDENTIFIED BY 'nmadXqF6UgFsaqoV40MdijlB'; GRANT ALL ON *.* TO 'serverconfig'@'%' WITH GRANT OPTION; CREATE USER 'monitoring'@'%' IDENTIFIED BY '9HaYT8v1UlMGE8yXtYW99uqb' WITH MAX_USER_CONNECTIONS 3; GRANT SYSTEM_USER, SELECT, PROCESS, SUPER, REPLICATION CLIENT, RELOAD ON *.* TO 'monitoring'@'%'; CREATE USER 'backups'@'%' IDENTIFIED BY 'Tmkk2F4tc3wET1Jmtl33QkMB'; GRANT CONNECTION_ADMIN, BACKUP_ADMIN, PROCESS, RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO 'backups'@'%'; GRANT SELECT ON performance_schema.log_status TO 'backups'@'%'; GRANT SELECT ON performance_schema.keyring_component_status TO 'backups'@'%'; GRANT SELECT ON performance_schema.replication_group_members TO 'backups'@'%'; UPDATE mysql.user SET authentication_string=null WHERE User='root' and Host='localhost'; ALTER USER 'root'@'localhost' IDENTIFIED BY 'nHrcXR8V0vdKR7jNwK8kL4mz'; REVOKE SYSTEM_USER, SYSTEM_VARIABLES_ADMIN, SUPER, REPLICATION_SLAVE_ADMIN, GROUP_REPLICATION_ADMIN, BINLOG_ADMIN, SET_USER_ID, ENCRYPTION_KEY_ADMIN, VERSION_TOKEN_ADMIN, CONNECTION_ADMIN ON *.* FROM 'root'@'localhost'; FLUSH PRIVILEGES", '--password=nHrcXR8V0vdKR7jNwK8kL4mz']' returned non-zero exit status 1.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-db1-2/charm/lib/charms/mysql/v0/mysql.py", line 1075, in configure_mysql_users
    self._run_mysqlcli_script(
  File "/var/lib/juju/agents/unit-db1-2/charm/lib/charms/tempo_k8s/v1/charm_tracing.py", line 735, in wrapped_function
    return callable(*args, **kwargs)  # type: ignore
  File "/var/lib/juju/agents/unit-db1-2/charm/src/mysql_vm_helpers.py", line 759, in _run_mysqlcli_script
    raise MySQLClientError(self.strip_off_passwords(e.stderr.decode("utf-8")))
charms.mysql.v0.mysql.MySQLClientError: mysql: [Warning] Using a password on the command line interface can be insecure.
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/snap/charmed-mysql/common/var/run/mysqld/mysqld.sock' (2)


[32mINFO    [0m pytest_operator.plugin:plugin.py:862 Forgetting main...