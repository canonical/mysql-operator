{"uid":"2a454f30f2dc8e4","name":"test_network_cut","fullName":"tests.integration.high_availability.test_self_healing#test_network_cut","historyId":"bb2aa2dc0f3a078ccd9996c1af51d19e","time":{"start":1715305029999,"stop":1715305440656,"duration":410657},"description":"Completely cut and restore network.","descriptionHtml":"<p>Completely cut and restore network.</p>\n","status":"failed","statusMessage":"AssertionError: Continuous writes not incrementing","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_self_healing.py\", line 217, in test_network_cut\n    await ensure_all_units_continuous_writes_incrementing(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 380, in ensure_all_units_continuous_writes_incrementing\n    for attempt in Retrying(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 325, in iter\n    raise retry_exc.reraise()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 158, in reraise\n    raise self.last_attempt.result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n    raise self._exception\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 392, in ensure_all_units_continuous_writes_incrementing\n    max_written_value > last_max_written_value\nAssertionError: Continuous writes not incrementing","flaky":true,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"mysql_charm_series","time":{"start":1715304547242,"stop":1715304547242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1715304547242,"stop":1715304547242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1715304547242,"stop":1715304547242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1715304547242,"stop":1715304547242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715304547243,"stop":1715304547379,"duration":136},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715304547379,"stop":1715304547379,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1715305027952,"stop":1715305029999,"duration":2047},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1715305027952,"stop":1715305027952,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Completely cut and restore network.","status":"failed","statusMessage":"AssertionError: Continuous writes not incrementing","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_self_healing.py\", line 217, in test_network_cut\n    await ensure_all_units_continuous_writes_incrementing(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 380, in ensure_all_units_continuous_writes_incrementing\n    for attempt in Retrying(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 325, in iter\n    raise retry_exc.reraise()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 158, in reraise\n    raise self.last_attempt.result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 451, in result\n    return self.__get_result()\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\n    raise self._exception\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 392, in ensure_all_units_continuous_writes_incrementing\n    max_written_value > last_max_written_value\nAssertionError: Continuous writes not incrementing","steps":[],"attachments":[{"uid":"63b1d648ee34164d","name":"log","source":"63b1d648ee34164d.txt","type":"text/plain","size":1474}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1715305440696,"stop":1715305441720,"duration":1024},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1715305441720,"stop":1715305441720,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1715305441782,"stop":1715305442286,"duration":504},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1715305442286,"stop":1715305442287,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1715305442287,"stop":1715305442287,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1715305442287,"stop":1715305442287,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az2022-635"},{"name":"thread","value":"8254-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":6,"broken":1,"skipped":0,"passed":74,"unknown":0,"total":81},"items":[{"uid":"24b3e75f8b491ab4","reportUrl":"../2521//#testresult/24b3e75f8b491ab4","status":"passed","time":{"start":1715218675290,"stop":1715218885424,"duration":210134}},{"uid":"a28550bb3d7eb60c","reportUrl":"../2516//#testresult/a28550bb3d7eb60c","status":"failed","statusDetails":"AssertionError: Continuous writes not incrementing","time":{"start":1715045720580,"stop":1715046127335,"duration":406755}},{"uid":"b58b76ee3ec09041","reportUrl":"../2514//#testresult/b58b76ee3ec09041","status":"failed","statusDetails":"AssertionError: Continuous writes not incrementing","time":{"start":1714959317523,"stop":1714959742372,"duration":424849}},{"uid":"c6daba2dde01f71","reportUrl":"../2513//#testresult/c6daba2dde01f71","status":"passed","time":{"start":1714872986234,"stop":1714873201467,"duration":215233}},{"uid":"a933bc153146d58b","reportUrl":"../2512//#testresult/a933bc153146d58b","status":"passed","time":{"start":1714786857184,"stop":1714787087955,"duration":230771}},{"uid":"e05f6e2589c6816f","reportUrl":"../2505//#testresult/e05f6e2589c6816f","status":"passed","time":{"start":1714700188789,"stop":1714700402896,"duration":214107}},{"uid":"533830602e5d8a1a","reportUrl":"../2502//#testresult/533830602e5d8a1a","status":"broken","statusDetails":"mysql.connector.errors.DatabaseError: 3100 (HY000): Error on observer while running replication hook 'before_commit'.","time":{"start":1714614117350,"stop":1714614309778,"duration":192428}},{"uid":"24b0486848d68276","reportUrl":"../2496//#testresult/24b0486848d68276","status":"passed","time":{"start":1714527369601,"stop":1714527591661,"duration":222060}},{"uid":"bf8c8ebef223b067","reportUrl":"../2487//#testresult/bf8c8ebef223b067","status":"passed","time":{"start":1714354520167,"stop":1714354734252,"duration":214085}},{"uid":"a117fe237acc8f50","reportUrl":"../2483//#testresult/a117fe237acc8f50","status":"failed","statusDetails":"AssertionError: Continuous writes not incrementing","time":{"start":1714268272218,"stop":1714268668755,"duration":396537}},{"uid":"f29eb6cb998ba826","reportUrl":"../2482//#testresult/f29eb6cb998ba826","status":"passed","time":{"start":1714181700190,"stop":1714181910838,"duration":210648}},{"uid":"2b234185a74d33b1","reportUrl":"../2479//#testresult/2b234185a74d33b1","status":"passed","time":{"start":1714096320190,"stop":1714096540922,"duration":220732}},{"uid":"2c82ecb6ace26dae","reportUrl":"../2473//#testresult/2c82ecb6ace26dae","status":"passed","time":{"start":1714009037960,"stop":1714009246409,"duration":208449}},{"uid":"a84748f3578394da","reportUrl":"../2464//#testresult/a84748f3578394da","status":"passed","time":{"start":1713922652638,"stop":1713922864258,"duration":211620}},{"uid":"c45201ff7228ab0f","reportUrl":"../2459//#testresult/c45201ff7228ab0f","status":"passed","time":{"start":1713836212208,"stop":1713836423601,"duration":211393}},{"uid":"d1b6e73465e755ca","reportUrl":"../2457//#testresult/d1b6e73465e755ca","status":"passed","time":{"start":1713749735676,"stop":1713749946565,"duration":210889}},{"uid":"27770a61a9f05df6","reportUrl":"../2456//#testresult/27770a61a9f05df6","status":"passed","time":{"start":1713663336740,"stop":1713663551531,"duration":214791}},{"uid":"8b85b5eccd6a671b","reportUrl":"../2455//#testresult/8b85b5eccd6a671b","status":"passed","time":{"start":1713576994834,"stop":1713577207138,"duration":212304}},{"uid":"ee189768f335fa8f","reportUrl":"../2452//#testresult/ee189768f335fa8f","status":"passed","time":{"start":1713490540918,"stop":1713490744160,"duration":203242}},{"uid":"ad06e0ee7bfbf399","reportUrl":"../2437//#testresult/ad06e0ee7bfbf399","status":"passed","time":{"start":1713317939269,"stop":1713318149175,"duration":209906}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"2a454f30f2dc8e4.json","parameterValues":[]}