{"uid":"2e2a1062e4a77d63","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_async_replication#test_build_and_deploy","historyId":"397dd6fb76b9bc4c6b9a194769795918","time":{"start":1725154352768,"stop":1725154976585,"duration":623817},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Failed to initialize MySQL users\n  db2/1 [idle] waiting: Waiting to join the cluster\n  db2/2 [idle] waiting: Waiting to join the cluster","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Failed to initialize MySQL users\n  db2/1 [idle] waiting: Waiting to join the cluster\n  db2/2 [idle] waiting: Waiting to join the cluster","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1725154351933,"stop":1725154351934,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1725154351934,"stop":1725154351934,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1725154351934,"stop":1725154352080,"duration":146},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1725154352080,"stop":1725154352767,"duration":687},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1725154352080,"stop":1725154352080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1725154352767,"stop":1725154352767,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Failed to initialize MySQL users\n  db2/1 [idle] waiting: Waiting to join the cluster\n  db2/2 [idle] waiting: Waiting to join the cluster","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Failed to initialize MySQL users\n  db2/1 [idle] waiting: Waiting to join the cluster\n  db2/2 [idle] waiting: Waiting to join the cluster","steps":[],"attachments":[{"uid":"a3318cd5210f2b28","name":"log","source":"a3318cd5210f2b28.txt","type":"text/plain","size":8015}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1725154976610,"stop":1725154976610,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1725154976627,"stop":1725154976642,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1725154976643,"stop":1725154977759,"duration":1116},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1725154977759,"stop":1725154977760,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1725154977760,"stop":1725154977760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1725154977760,"stop":1725154977760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1040-191"},{"name":"thread","value":"9264-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"7a4296670e2459ef","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":8,"skipped":0,"passed":89,"unknown":1,"total":98},"items":[{"uid":"4e43b09b407d13bc","reportUrl":"../2959//#testresult/4e43b09b407d13bc","status":"passed","time":{"start":1725067819452,"stop":1725068277893,"duration":458441}},{"uid":"dca67e8cd46154e1","reportUrl":"../2955//#testresult/dca67e8cd46154e1","status":"passed","time":{"start":1724981467269,"stop":1724981969959,"duration":502690}},{"uid":"6cf63e27be4905be","reportUrl":"../2952//#testresult/6cf63e27be4905be","status":"passed","time":{"start":1724895012835,"stop":1724895510586,"duration":497751}},{"uid":"9b64b26fd64d77ad","reportUrl":"../2948//#testresult/9b64b26fd64d77ad","status":"passed","time":{"start":1724722204580,"stop":1724722672734,"duration":468154}},{"uid":"e618eb2ae852f708","reportUrl":"../2945//#testresult/e618eb2ae852f708","status":"passed","time":{"start":1724635790971,"stop":1724636267942,"duration":476971}},{"uid":"f7ef2d6906116db3","reportUrl":"../2944//#testresult/f7ef2d6906116db3","status":"passed","time":{"start":1724549441019,"stop":1724549912582,"duration":471563}},{"uid":"f8c0d5431f9d72d1","reportUrl":"../2943//#testresult/f8c0d5431f9d72d1","status":"passed","time":{"start":1724462997670,"stop":1724463465563,"duration":467893}},{"uid":"c17af9264607d61a","reportUrl":"../2940//#testresult/c17af9264607d61a","status":"passed","time":{"start":1724376586528,"stop":1724377050883,"duration":464355}},{"uid":"1e0dbbfc70250d76","reportUrl":"../2934//#testresult/1e0dbbfc70250d76","status":"passed","time":{"start":1724290256635,"stop":1724290713577,"duration":456942}},{"uid":"596a6f45202a7508","reportUrl":"../2927//#testresult/596a6f45202a7508","status":"passed","time":{"start":1724203862693,"stop":1724204337325,"duration":474632}},{"uid":"a8f7962e14045bb7","reportUrl":"../2917//#testresult/a8f7962e14045bb7","status":"passed","time":{"start":1724117391487,"stop":1724117858428,"duration":466941}},{"uid":"beddc84f11cff8db","reportUrl":"../2911//#testresult/beddc84f11cff8db","status":"passed","time":{"start":1724031014087,"stop":1724031475956,"duration":461869}},{"uid":"5e62ac01f209b59a","reportUrl":"../2910//#testresult/5e62ac01f209b59a","status":"passed","time":{"start":1723944642357,"stop":1723945110102,"duration":467745}},{"uid":"7e17e60bbe4bca9","reportUrl":"../2904//#testresult/7e17e60bbe4bca9","status":"passed","time":{"start":1723771810162,"stop":1723772272953,"duration":462791}},{"uid":"8ed5425cb32e00bc","reportUrl":"../2897//#testresult/8ed5425cb32e00bc","status":"passed","time":{"start":1723685414787,"stop":1723685909347,"duration":494560}},{"uid":"f24d4d635423f79f","reportUrl":"../2894//#testresult/f24d4d635423f79f","status":"passed","time":{"start":1723599891808,"stop":1723600351902,"duration":460094}},{"uid":"ae78a59328173646","reportUrl":"../2892//#testresult/ae78a59328173646","status":"passed","time":{"start":1723513030554,"stop":1723513492638,"duration":462084}},{"uid":"c6086fb1702e529","reportUrl":"../2883//#testresult/c6086fb1702e529","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users\n  db2/2 [idle] blocked: Failed to initialize MySQL users","time":{"start":1723427217315,"stop":1723427849439,"duration":632124}},{"uid":"cf62e4a889e2d11e","reportUrl":"../2882//#testresult/cf62e4a889e2d11e","status":"passed","time":{"start":1723340369568,"stop":1723340815358,"duration":445790}},{"uid":"f477eb463aa18c7a","reportUrl":"../2881//#testresult/f477eb463aa18c7a","status":"passed","time":{"start":1723254276008,"stop":1723254749510,"duration":473502}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"2e2a1062e4a77d63.json","parameterValues":[]}