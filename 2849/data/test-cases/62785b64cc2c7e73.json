{"uid":"62785b64cc2c7e73","name":"test_cluster_isolation","fullName":"tests.integration.high_availability.test_replication#test_cluster_isolation","historyId":"135d9251eb347937e465a64ddaf59612","time":{"start":1722736465226,"stop":1722737665855,"duration":1200629},"description":"Test for cluster data isolation.\n\n    This test creates a new cluster, create a new table on both cluster, write a single record with\n    the application name for each cluster, retrieve and compare these records, asserting they are\n    not the same.\n    ","descriptionHtml":"<p>Test for cluster data isolation.</p>\n<pre><code>This test creates a new cluster, create a new table on both cluster, write a single record with\nthe application name for each cluster, retrieve and compare these records, asserting they are\nnot the same.\n</code></pre>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 283, in test_cluster_isolation\n    app, _ = await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 226, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 148, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1722736465074,"stop":1722736465074,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1722736465075,"stop":1722736465075,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1722736465075,"stop":1722736465225,"duration":150},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1722736465225,"stop":1722736465225,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test for cluster data isolation.\n\n    This test creates a new cluster, create a new table on both cluster, write a single record with\n    the application name for each cluster, retrieve and compare these records, asserting they are\n    not the same.\n    ","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_replication.py\", line 283, in test_cluster_isolation\n    app, _ = await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 226, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/high_availability_helpers.py\", line 148, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","steps":[],"attachments":[{"uid":"70f351afd858e53","name":"log","source":"70f351afd858e53.txt","type":"text/plain","size":8743}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1722737665893,"stop":1722737665894,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1722737665894,"stop":1722737675374,"duration":9480},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1722737675374,"stop":1722737675374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1722737675374,"stop":1722737675374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1722737675374,"stop":1722737675374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(3)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_replication"},{"name":"host","value":"fv-az774-44"},{"name":"thread","value":"8065-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"2a208199d11fad49","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":69,"unknown":0,"total":73},"items":[{"uid":"e52c1c2118d8c036","reportUrl":"../2848//#testresult/e52c1c2118d8c036","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","time":{"start":1722649260135,"stop":1722650460826,"duration":1200691}},{"uid":"b0e35176c734d906","reportUrl":"../2841//#testresult/b0e35176c734d906","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql/0 [idle] unknown: \n  mysql/1 [idle] unknown: \n  mysql/2 [idle] unknown:","time":{"start":1722562811721,"stop":1722564012389,"duration":1200668}},{"uid":"5bef998216bf9e84","reportUrl":"../2839//#testresult/5bef998216bf9e84","status":"passed","time":{"start":1722476119380,"stop":1722476711120,"duration":591740}},{"uid":"d7921b40844b1465","reportUrl":"../2836//#testresult/d7921b40844b1465","status":"passed","time":{"start":1722389372646,"stop":1722389913408,"duration":540762}},{"uid":"6a33b8fb9d52ac31","reportUrl":"../2832//#testresult/6a33b8fb9d52ac31","status":"passed","time":{"start":1722303392442,"stop":1722303932830,"duration":540388}},{"uid":"71e8939ca1c9a2e","reportUrl":"../2827//#testresult/71e8939ca1c9a2e","status":"passed","time":{"start":1722216802890,"stop":1722217316901,"duration":514011}},{"uid":"d0372b0e7e7e2ec1","reportUrl":"../2824//#testresult/d0372b0e7e7e2ec1","status":"passed","time":{"start":1722131068599,"stop":1722131613320,"duration":544721}},{"uid":"ccbe09fad46ec86c","reportUrl":"../2819//#testresult/ccbe09fad46ec86c","status":"passed","time":{"start":1722043892835,"stop":1722044414550,"duration":521715}},{"uid":"1719b8a4ca3b521e","reportUrl":"../2811//#testresult/1719b8a4ca3b521e","status":"passed","time":{"start":1721957916993,"stop":1721958514177,"duration":597184}},{"uid":"7d2f2444a61583bc","reportUrl":"../2807//#testresult/7d2f2444a61583bc","status":"passed","time":{"start":1721871316506,"stop":1721871873509,"duration":557003}},{"uid":"227a4c190f2c4148","reportUrl":"../2802//#testresult/227a4c190f2c4148","status":"passed","time":{"start":1721785472672,"stop":1721786038430,"duration":565758}},{"uid":"30959c5d2d5d2ae6","reportUrl":"../2797//#testresult/30959c5d2d5d2ae6","status":"passed","time":{"start":1721698514788,"stop":1721699073466,"duration":558678}},{"uid":"3f8e91f076ee0ff","reportUrl":"../2787//#testresult/3f8e91f076ee0ff","status":"passed","time":{"start":1721612146515,"stop":1721612707315,"duration":560800}},{"uid":"8d37c445b4fe55a1","reportUrl":"../2786//#testresult/8d37c445b4fe55a1","status":"passed","time":{"start":1721525725469,"stop":1721526247026,"duration":521557}},{"uid":"7d4d3e30d95434a8","reportUrl":"../2785//#testresult/7d4d3e30d95434a8","status":"passed","time":{"start":1721439157319,"stop":1721439727738,"duration":570419}},{"uid":"8a6409202cc00dc3","reportUrl":"../2776//#testresult/8a6409202cc00dc3","status":"passed","time":{"start":1721266454422,"stop":1721266984765,"duration":530343}},{"uid":"8e539e5b6a1200da","reportUrl":"../2773//#testresult/8e539e5b6a1200da","status":"passed","time":{"start":1721180334062,"stop":1721180876767,"duration":542705}},{"uid":"56f7071746ba35b6","reportUrl":"../2769//#testresult/56f7071746ba35b6","status":"passed","time":{"start":1721093605117,"stop":1721094183013,"duration":577896}},{"uid":"fdd6ec612d23e651","reportUrl":"../2764//#testresult/fdd6ec612d23e651","status":"passed","time":{"start":1721007479939,"stop":1721008033336,"duration":553397}},{"uid":"c76e1337a9b095e8","reportUrl":"../2763//#testresult/c76e1337a9b095e8","status":"passed","time":{"start":1720921272670,"stop":1720921835574,"duration":562904}}]},"tags":["group(3)","asyncio"]},"source":"62785b64cc2c7e73.json","parameterValues":[]}