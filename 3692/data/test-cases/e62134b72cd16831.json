{"uid":"e62134b72cd16831","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_upgrade_rollback_incompat#test_build_and_deploy","historyId":"c7f943e00fe8350916d652927be51e6e","time":{"start":1743557463084,"stop":1743557602383,"duration":139299},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in blocked: mysql/1","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_upgrade_rollback_incompat.py\", line 71, in test_build_and_deploy\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP)\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 212, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3204, in wait_for_idle\n    _raise_for_status(blocks, \"blocked\")\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3094, in _raise_for_status\n    raise error_type(\njuju.errors.JujuUnitError: Unit in blocked: mysql/1","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"charm","time":{"start":1743557462968,"stop":1743557462968,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1743557462968,"stop":1743557462968,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1743557462968,"stop":1743557462968,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1743557462969,"stop":1743557463083,"duration":114},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1743557463083,"stop":1743557463083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in blocked: mysql/1","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_upgrade_rollback_incompat.py\", line 71, in test_build_and_deploy\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP)\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 212, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3204, in wait_for_idle\n    _raise_for_status(blocks, \"blocked\")\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3094, in _raise_for_status\n    raise error_type(\njuju.errors.JujuUnitError: Unit in blocked: mysql/1","steps":[],"attachments":[{"uid":"4573fc2dadb1ced5","name":"log","source":"4573fc2dadb1ced5.txt","type":"text/plain","size":1905}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1743557602388,"stop":1743557602388,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1743557602409,"stop":1743557603881,"duration":1472},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1743557603881,"stop":1743557603881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1743557603881,"stop":1743557603881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1743557603881,"stop":1743557603881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_rollback_incompat"},{"name":"host","value":"fv-az1371-607"},{"name":"thread","value":"14166-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_rollback_incompat"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ce6a357ccc438b82","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":7,"skipped":0,"passed":283,"unknown":5,"total":295},"items":[{"uid":"fc45b831b62361af","reportUrl":"../3691//#testresult/fc45b831b62361af","status":"passed","time":{"start":1743471271693,"stop":1743471601154,"duration":329461}},{"uid":"939c2d5c5b282ab3","reportUrl":"../3686//#testresult/939c2d5c5b282ab3","status":"passed","time":{"start":1743384615053,"stop":1743384933991,"duration":318938}},{"uid":"d98e984f4ad01951","reportUrl":"../3685//#testresult/d98e984f4ad01951","status":"passed","time":{"start":1743298167468,"stop":1743298524603,"duration":357135}},{"uid":"432e44f428d4c58","reportUrl":"../3684//#testresult/432e44f428d4c58","status":"passed","time":{"start":1743211739619,"stop":1743212074027,"duration":334408}},{"uid":"110dce70cae8bf34","reportUrl":"../3681//#testresult/110dce70cae8bf34","status":"passed","time":{"start":1743125441630,"stop":1743125813833,"duration":372203}},{"uid":"5e7814edbe3d8541","reportUrl":"../3680//#testresult/5e7814edbe3d8541","status":"passed","time":{"start":1743038983578,"stop":1743039356634,"duration":373056}},{"uid":"337b61d30d99ded6","reportUrl":"../3677//#testresult/337b61d30d99ded6","status":"passed","time":{"start":1742952775709,"stop":1742953187736,"duration":412027}},{"uid":"39c7aa107eb6dce9","reportUrl":"../3672//#testresult/39c7aa107eb6dce9","status":"passed","time":{"start":1742866795645,"stop":1742867179127,"duration":383482}},{"uid":"8dd29552ed387346","reportUrl":"../3671//#testresult/8dd29552ed387346","status":"passed","time":{"start":1742779872980,"stop":1742780257409,"duration":384429}},{"uid":"3a97907fd891cbd8","reportUrl":"../3670//#testresult/3a97907fd891cbd8","status":"passed","time":{"start":1742693416642,"stop":1742693807934,"duration":391292}},{"uid":"71dad86934f6590f","reportUrl":"../3669//#testresult/71dad86934f6590f","status":"passed","time":{"start":1742606958033,"stop":1742607337453,"duration":379420}},{"uid":"fe4bd43ead9eab48","reportUrl":"../3668//#testresult/fe4bd43ead9eab48","status":"passed","time":{"start":1742520589512,"stop":1742520955876,"duration":366364}},{"uid":"5a02ebb0f7d8df2a","reportUrl":"../3665//#testresult/5a02ebb0f7d8df2a","status":"passed","time":{"start":1742434187729,"stop":1742434554129,"duration":366400}},{"uid":"6265a0ff9b042ac9","reportUrl":"../3663//#testresult/6265a0ff9b042ac9","status":"passed","time":{"start":1742347830154,"stop":1742348202267,"duration":372113}},{"uid":"ae9ef8c269edca1c","reportUrl":"../3658//#testresult/ae9ef8c269edca1c","status":"passed","time":{"start":1742261771347,"stop":1742262162128,"duration":390781}},{"uid":"b3fee5d3545c6354","reportUrl":"../3657//#testresult/b3fee5d3545c6354","status":"passed","time":{"start":1742002140531,"stop":1742002519063,"duration":378532}},{"uid":"fe99c6ad725896d5","reportUrl":"../3655//#testresult/fe99c6ad725896d5","status":"passed","time":{"start":1741915797901,"stop":1741916195502,"duration":397601}},{"uid":"ba9099177c81af80","reportUrl":"../3653//#testresult/ba9099177c81af80","status":"passed","time":{"start":1741829464453,"stop":1741829853780,"duration":389327}},{"uid":"73f4cb4e7fa9c00c","reportUrl":"../3651//#testresult/73f4cb4e7fa9c00c","status":"passed","time":{"start":1741743050118,"stop":1741743454044,"duration":403926}},{"uid":"b5fb9c19149a14ce","reportUrl":"../3638//#testresult/b5fb9c19149a14ce","status":"passed","time":{"start":1741570143032,"stop":1741570493286,"duration":350254}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires amd64 architecture')"]},"source":"e62134b72cd16831.json","parameterValues":[]}