{"uid":"a307df3cf873cf5e","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_async_replication#test_build_and_deploy","historyId":"397dd6fb76b9bc4c6b9a194769795918","time":{"start":1737854903031,"stop":1737855526434,"duration":623403},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users\n  db1/1 [idle] waiting: Waiting to join the cluster\n  db1/2 [idle] waiting: Waiting to join the cluster","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users\n  db1/1 [idle] waiting: Waiting to join the cluster\n  db1/2 [idle] waiting: Waiting to join the cluster","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1737854902285,"stop":1737854902286,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1737854902286,"stop":1737854902422,"duration":136},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1737854902286,"stop":1737854902286,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1737854902423,"stop":1737854903030,"duration":607},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1737854902423,"stop":1737854902423,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1737854903031,"stop":1737854903031,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users\n  db1/1 [idle] waiting: Waiting to join the cluster\n  db1/2 [idle] waiting: Waiting to join the cluster","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-operator/mysql-operator/tests/integration/high_availability/test_async_replication.py\", line 94, in test_build_and_deploy\n    await gather(\n  File \"/home/runner/work/mysql-operator/mysql-operator/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\ndb1/0 [idle] blocked: Failed to initialize MySQL users\n  db1/1 [idle] waiting: Waiting to join the cluster\n  db1/2 [idle] waiting: Waiting to join the cluster","steps":[],"attachments":[{"uid":"7c94525571fd5096","name":"log","source":"7c94525571fd5096.txt","type":"text/plain","size":8937}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1737855526479,"stop":1737855526479,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1737855526503,"stop":1737855526525,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1737855526526,"stop":1737855528163,"duration":1637},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1737855528164,"stop":1737855528164,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1737855528164,"stop":1737855528164,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1737855528164,"stop":1737855528164,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1660-484"},{"name":"thread","value":"10537-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"74dcb1e1ff5e2a71","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":32,"skipped":0,"passed":195,"unknown":7,"total":234},"items":[{"uid":"23589b12c6ab04ad","reportUrl":"../3429//#testresult/23589b12c6ab04ad","status":"passed","time":{"start":1737768513090,"stop":1737769127327,"duration":614237}},{"uid":"7e81d41fb880db39","reportUrl":"../3418//#testresult/7e81d41fb880db39","status":"passed","time":{"start":1737682071724,"stop":1737682652597,"duration":580873}},{"uid":"dfe2cae53a7a4961","reportUrl":"../3412//#testresult/dfe2cae53a7a4961","status":"passed","time":{"start":1737595703365,"stop":1737596305322,"duration":601957}},{"uid":"d271da9254a83d1f","reportUrl":"../3404//#testresult/d271da9254a83d1f","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb1/2 [idle] active: Primary","time":{"start":1737509343862,"stop":1737509965974,"duration":622112}},{"uid":"2de9d74182a26e49","reportUrl":"../3395//#testresult/2de9d74182a26e49","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb1/1 [idle] blocked: Failed to initialize MySQL users","time":{"start":1737422895590,"stop":1737423529470,"duration":633880}},{"uid":"cda42f8269458808","reportUrl":"../3388//#testresult/cda42f8269458808","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] active: Primary\n  db2/1 [idle] active: \n  db2/2 [idle] active:","time":{"start":1737336492030,"stop":1737337124958,"duration":632928}},{"uid":"e9268026e3751306","reportUrl":"../3387//#testresult/e9268026e3751306","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb1/1 [idle] blocked: Failed to initialize MySQL users","time":{"start":1737250100692,"stop":1737250728889,"duration":628197}},{"uid":"af56ae3b884002f6","reportUrl":"../3386//#testresult/af56ae3b884002f6","status":"passed","time":{"start":1737163721876,"stop":1737164306040,"duration":584164}},{"uid":"ee5f7c74021126ee","reportUrl":"../3379//#testresult/ee5f7c74021126ee","status":"passed","time":{"start":1737077338549,"stop":1737077916779,"duration":578230}},{"uid":"c919e052d2953a5b","reportUrl":"../3375//#testresult/c919e052d2953a5b","status":"passed","time":{"start":1736990978071,"stop":1736991569762,"duration":591691}},{"uid":"9c4117060dfbbc05","reportUrl":"../3370//#testresult/9c4117060dfbbc05","status":"passed","time":{"start":1736904568254,"stop":1736905132885,"duration":564631}},{"uid":"a4997405a0fd68c0","reportUrl":"../3361//#testresult/a4997405a0fd68c0","status":"passed","time":{"start":1736818149628,"stop":1736818731157,"duration":581529}},{"uid":"cdfc91d6e28fce15","reportUrl":"../3355//#testresult/cdfc91d6e28fce15","status":"passed","time":{"start":1736731806795,"stop":1736732394243,"duration":587448}},{"uid":"faaba2d5156ad48b","reportUrl":"../3354//#testresult/faaba2d5156ad48b","status":"passed","time":{"start":1736645394100,"stop":1736645986342,"duration":592242}},{"uid":"7f42510df4ac43c8","reportUrl":"../3352//#testresult/7f42510df4ac43c8","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] active: Primary\n  db2/1 [idle] active: \n  db2/2 [idle] blocked: Failed to initialize MySQL users","time":{"start":1736558932793,"stop":1736559564476,"duration":631683}},{"uid":"e73019fb6e95478b","reportUrl":"../3344//#testresult/e73019fb6e95478b","status":"passed","time":{"start":1736472609659,"stop":1736473226051,"duration":616392}},{"uid":"a61d72e802787055","reportUrl":"../3314//#testresult/a61d72e802787055","status":"passed","time":{"start":1735867718828,"stop":1735868310588,"duration":591760}},{"uid":"e31ccf177e4d4f8c","reportUrl":"../3313//#testresult/e31ccf177e4d4f8c","status":"passed","time":{"start":1735781341366,"stop":1735781934970,"duration":593604}},{"uid":"3537ec924d5c752d","reportUrl":"../3312//#testresult/3537ec924d5c752d","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] blocked: Failed to initialize MySQL users","time":{"start":1735694949681,"stop":1735695585365,"duration":635684}},{"uid":"fbb4e2a307e2519b","reportUrl":"../3311//#testresult/fbb4e2a307e2519b","status":"passed","time":{"start":1735608558233,"stop":1735609169719,"duration":611486}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"a307df3cf873cf5e.json","parameterValues":[]}